(this.webpackJsonpmantalents=this.webpackJsonpmantalents||[]).push([[0],{212:function(e,t,a){},289:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),i=a.n(c),o=a(19),s=a(18),l=a.n(s),u=a(25),d=a(171),b=a.n(d).a.create({baseURL:"http://167.71.26.102:80/api"}),j=localStorage.getItem("token")||"",m=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.post("/auth/login",{correo:t,password:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/auth",{headers:{"x-token":j}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=a(4),h=Object(n.createContext)({auth:{uid:"",checking:!0,logged:!0,name:"",email:"",opciones:[{_id:"",clave:"",ruta:"",titulo:""}]},login:function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),verificaToken:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){return!0}}),O={uid:"",checking:!0,logged:!1,name:"",email:"",opciones:[{_id:"",clave:"",ruta:"",titulo:""}]},x=function(e){var t=e.children,a=Object(n.useState)(O),r=Object(o.a)(a,2),c=r[0],i=r[1],s=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t,a);case 2:return(n=e.sent).usuario&&(localStorage.setItem("token",n.token),r=n.usuario,console.log(r.opciones),i({uid:r.uid,checking:!1,logged:!0,name:r.nombre,email:r.correo,opciones:r.opciones})),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),d=Object(n.useCallback)(Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=4;break}return i({uid:void 0,checking:!1,logged:!1,name:void 0,email:void 0,opciones:[]}),e.abrupt("return",!1);case 4:return e.next=6,p();case 6:if(!(t=e.sent)){e.next=14;break}return localStorage.setItem("token",t.token),a=t.usuario,i({uid:a.uid,checking:!1,logged:!0,name:a.nombre,email:a.correo,opciones:a.opciones}),e.abrupt("return",!0);case 14:return i({uid:void 0,checking:!1,logged:!1,name:void 0,email:void 0}),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)}))),[]);return Object(f.jsx)(h.Provider,{value:{auth:c,login:s,verificaToken:d,logout:function(){return localStorage.removeItem("token"),i({checking:!1,logged:!1}),!0}},children:t})},g=(a(212),a(31)),v=a(300),y=a(302),w=a(111),k=a(46),C=function(){var e=Object(n.useContext)(h).login,t=function(){var t=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(a.username,a.password);case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)(v.a,{name:"basic",labelCol:{span:6},wrapperCol:{span:8},initialValues:{remember:!0},onFinish:t,onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(f.jsx)(v.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(f.jsx)(y.a.Password,{})}),Object(f.jsx)(v.a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:Object(f.jsx)(w.a,{children:"Remember me"})}),Object(f.jsx)(v.a.Item,{wrapperCol:{offset:8,span:16},children:Object(f.jsx)(k.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})},S=a(295),I=a(294),_=a(88),F=a(61),P=a(313),D=a(314),L=a(315),Y=a(316),M=a(317),z=a(318),T=a(319),V=a(52),q=a(14),A=a(183),R=a(291),U=a(292),E=a(293),K=a(296),B=a(304),N=a(306),G=a(307),H=a(308),W=localStorage.getItem("token")||"",J=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/categorias");case 2:return t=e.sent,e.abrupt("return",t.data.categorias);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t._id.length>0)){e.next=6;break}return e.next=3,b.put("/categorias/".concat(t._id),t,{headers:{"x-token":W}});case 3:a=e.sent,e.next=9;break;case 6:return e.next=8,b.post("/categorias",t,{headers:{"x-token":W}});case 8:a=e.sent;case 9:return e.abrupt("return",a.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),i=Object(o.a)(c,2),s=i[0],l=i[1];return Object(n.useEffect)((function(){J().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,categorias:s,setCategorias:l}},Z=a(135);function $(){var e={current:null};return{filterDropdown:function(t){var a=t.setSelectedKeys,n=t.selectedKeys,r=t.confirm,c=t.clearFilters;return Object(f.jsxs)("div",{style:{padding:8},children:[Object(f.jsx)(y.a,{ref:function(t){return e.current=t},placeholder:"Search",value:n[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return r},style:{width:188,marginBottom:8,display:"block"}}),Object(f.jsx)(k.a,{type:"primary",onClick:function(){return r()},icon:Object(f.jsx)(Z.a,{}),size:"small",style:{width:90,marginRight:8},children:"Buscar"}),Object(f.jsx)(k.a,{size:"small",style:{width:90},onClick:c,children:"Resetear"})]})},filterIcon:function(e){return Object(f.jsx)(Z.a,{style:{color:e?"#1890ff":void 0}})},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){var t;return null===(t=e.current)||void 0===t?void 0:t.select()}))}}}var ee=function(){var e=v.a.useForm(),t=Object(o.a)(e,1)[0],a=[Object(q.a)(Object(q.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",render:function(e){return e}},$()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),{title:"Usuario",dataIndex:["usuario","nombre"],key:"usuario"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(N.a,{}),onClick:function(){h(!0),b(e),t.setFieldsValue({nombre:e.nombre})}})}}],r=X(),c=r.categorias,i=r.setCategorias,s=r.isLoading,l=Object(n.useState)({_id:"",nombre:""}),u=Object(o.a)(l,2),d=u[0],b=u[1],j=Object(n.useState)(!1),m=Object(o.a)(j,2),p=m[0],h=m[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(R.a,{gutter:12,children:Object(f.jsx)(U.a,{span:12,offset:12,children:Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(G.a,{}),size:"large",onClick:function(){h(!0),b({_id:"",nombre:""}),t.setFieldsValue({nombre:""})}})})}),Object(f.jsx)(E.a,{orientation:"left",children:"Categorias/Grupos"}),Object(f.jsx)(R.a,{gutter:[16,24],children:Object(f.jsx)(K.a,{tableLayout:"fixed",loading:s,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:c,columns:a})}),Object(f.jsx)(B.a,{title:"Categor\xeda",width:720,height:300,onClose:function(){h(!1)},visible:p,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(f.jsxs)(v.a,{form:t,name:"formcategoria",labelCol:{span:4},wrapperCol:{span:12},initialValues:{remember:!0},onFinish:function(e){b({_id:d._id,nombre:e.nombre}),Q(Object(q.a)(Object(q.a)({},e),{},{_id:d._id})).then((function(t){d._id.length>0?i(c.map((function(t){return t._id===d._id?Object(q.a)(Object(q.a)({},t),{},{nombre:e.nombre}):t}))):i([].concat(Object(V.a)(c),[t])),A.b.success("Se almacen\xf3 correctamente la categor\xeda"),h(!1)})).catch((function(e){A.b.error("Se presentaron errores al intentar almacenar las categorias")}))},onFinishFailed:function(){},autoComplete:"off",children:[Object(f.jsx)(v.a.Item,{label:"Descripci\xf3n",name:"nombre",rules:[{required:!0,message:"Por favor ingrese la descripci\xf3n"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{wrapperCol:{offset:8,span:16},children:Object(f.jsx)(k.a,{type:"primary",htmlType:"submit",icon:Object(f.jsx)(H.a,{}),children:"Guardar"})})]})})]})},te=a(110),ae=a(305),ne=a(176),re=a(297),ce=a(301),ie=a(309),oe=a(310),se=a(311),le=localStorage.getItem("token")||"",ue=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/movimientos");case 2:return t=e.sent,e.abrupt("return",t.data.movimientos);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("movimientos/ultimo");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/movimientos/electronica/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/uploads/facturas/".concat(t),{responseType:"blob"});case 2:a=e.sent,window.open(URL.createObjectURL(a.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=6;break}return e.next=3,b.put("/movimientos/".concat(t),a,{headers:{"x-token":le}});case 3:n=e.sent,e.next=9;break;case 6:return e.next=8,b.post("/movimientos",a,{headers:{"x-token":le}});case 8:n=e.sent;case 9:return e.abrupt("return",n.data);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),pe=localStorage.getItem("token")||"",fe=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/personas");case 2:return t=e.sent,e.abrupt("return",t.data.personas);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t._id.length>0)){e.next=6;break}return e.next=3,b.put("/personas/".concat(t._id),t,{headers:{"x-token":pe}});case 3:a=e.sent,e.next=9;break;case 6:return e.next=8,b.post("/personas",t,{headers:{"x-token":pe}});case 8:a=e.sent;case 9:return e.abrupt("return",a.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),i=Object(o.a)(c,2),s=i[0],l=i[1];return Object(n.useEffect)((function(){fe().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,personas:s,setPersonas:l}},xe=localStorage.getItem("token")||"",ge=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/productos");case 2:return(t=e.sent).data.productos.map((function(e){return e.idaux=e._id})),e.abrupt("return",t.data.productos);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(e){var t,a;return"".concat(null===(t=b.defaults.baseURL)||void 0===t?void 0:t.substr(0,null===(a=b.defaults.baseURL)||void 0===a?void 0:a.lastIndexOf("/")),"/uploads/productos/").concat(e)},ye=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("archivo",a),e.next=4,b.put("/uploads/productos/".concat(t),n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),we=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!(t.id.length>0)){e.next=7;break}return e.next=4,b.put("/productos/".concat(t.id),t,{headers:{"x-token":xe}});case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,b.post("/productos",t,{headers:{"x-token":xe}});case 9:a=e.sent;case 10:return e.abrupt("return",a.data);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),i=Object(o.a)(c,2),s=i[0],l=i[1];return Object(n.useEffect)((function(){ge().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,productos:s,setProductos:l}},Ce=a(178),Se=a(34),Ie=a.n(Se),_e=function(e){var t=e.Forma,a=e.persona,n=e.setpersona,r=e.personas,c=void 0===r?[]:r,i=e.setPersonas,o=e.formulario,s=e.setformulario;return Object(f.jsx)(B.a,{title:"Crear/Modificar Cliente",width:720,height:400,onClose:function(){s(!1)},visible:o,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(f.jsxs)(v.a,{form:t,name:"formcategoria",labelCol:{span:4},wrapperCol:{span:12},initialValues:{remember:!0},onFinish:function(e){n({_id:a._id,identificacion:e.identificacion,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,correoelectronico:e.correoelectronico}),he(Object(q.a)(Object(q.a)({},e),{},{_id:a._id})).then((function(t){a._id.length>0?i(c.map((function(t){return t._id===a._id?Object(q.a)(Object(q.a)({},t),{},{identificacion:e.identificacion,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,correoelectronico:e.correoelectronico}):t}))):(console.log(t),i([].concat(Object(V.a)(c),[t])),console.log(c)),A.b.success("Se almacen\xf3 correctamente el producto"),s(!1)})).catch((function(e){A.b.error("Se presentaron errores al intentar almacenar los productos")}))},onFinishFailed:function(){},autoComplete:"off",children:[Object(f.jsx)(v.a.Item,{label:"Identificaci\xf3n",name:"identificacion",rules:[{required:!0,message:"Por favor ingrese la identificaci\xf3n"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Descripci\xf3n",name:"nombre",rules:[{required:!0,message:"Por favor ingrese la descripci\xf3n"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Direcci\xf3n",name:"direccion",children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Tel\xe9fono",name:"telefono",children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Correo Electr\xf3nico",name:"correoelectronico",children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{wrapperCol:{offset:8,span:16},children:Object(f.jsx)(k.a,{type:"primary",htmlType:"submit",icon:Object(f.jsx)(H.a,{}),children:"Guardar"})})]})})},Fe=te.a.Option,Pe=function(){var e=v.a.useForm(),t=Object(o.a)(e,1)[0],a=v.a.useForm(),r=Object(o.a)(a,1)[0],c=Object(n.useState)({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),i=Object(o.a)(c,2),s=i[0],l=i[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),b=d[0],j=d[1],m=Object(n.useState)(!1),p=Object(o.a)(m,2),h=p[0],O=p[1],x=[Object(q.a)(Object(q.a)({title:"C\xf3digo",dataIndex:"codigo",key:"codigo",width:150,render:function(e){return e}},$()),{},{onFilter:function(e,t){return t.codigo.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.codigo.length-t.codigo.length}}),{title:"Fecha",dataIndex:"fecha",key:"fecha",width:200,render:function(e){return"string"===typeof e?e.substr(0,10):Ie()(e).format("YYYY-MM-DD")}},{title:"Cliente",dataIndex:["cliente","nombre"],key:"cliente"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(f.jsxs)(ae.b,{children:[Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(N.a,{}),onClick:function(){var a,n;J(!0),P(e);var r=[];null===(a=e.productos)||void 0===a||a.forEach((function(e){r.push({item:e.item._id,cantidad:e.cantidad,precio:e.precio,total:e.cantidad*e.precio})})),t.setFieldsValue({codigo:e.codigo,cliente:null===(n=e.cliente)||void 0===n?void 0:n._id,subtotal:e.subtotal,iva:e.iva,descuento:e.descuento,total:e.total,fecha:Ie()(e.fecha,"YYYY-MM-DD"),productos:r})}}),Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(ie.a,{}),onClick:function(){O(!0),be(e._id).then((function(e){console.log(e.data[0]);var t="";t=e.data[0].RespuestaRecepcionComprobante?e.data[0].RespuestaRecepcionComprobante.comprobantes.comprobante.mensajes.mensaje.mensaje:e.data[0].RespuestaAutorizacionComprobante.autorizaciones.autorizacion.numeroAutorizacion,O(!1),A.b.success("Se presentaron los siguientes mensajes: ".concat(t," "))})).catch((function(e){console.log(e),O(!1),A.b.error("Se presentaron los siguientes mensajes")}))}}),Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(oe.a,{}),onClick:function(){je(e._id).then((function(e){console.log(e)}))}})]})}}],g=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),i=Object(o.a)(c,2),s=i[0],l=i[1];return Object(n.useEffect)((function(){ue().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,movimientos:s,setMovimientos:l}}(),w=g.movimientos,C=g.setMovimientos,S=g.isLoading,I=Object(n.useState)({_id:"",fecha:new Date,iva:0,descuento:0,subtotal:0,total:0,codigo:""}),_=Object(o.a)(I,2),F=_[0],P=_[1],D=Oe(),L=D.personas,Y=D.setPersonas,M=ke().productos,z=Object(n.useState)(!1),T=Object(o.a)(z,2),W=T[0],J=T[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(R.a,{gutter:12,children:Object(f.jsx)(U.a,{span:12,offset:12,children:Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(G.a,{}),size:"large",onClick:function(){de().then((function(e){t.setFieldsValue({codigo:parseInt(e.codigo)+1})})),J(!0),P({_id:"",fecha:new Date,codigo:"",subtotal:0,iva:0,total:0,descuento:0}),t.setFieldsValue({cliente:"",subtotal:0,iva:0,descuento:0,total:0,fecha:Ie()(new Date,"YYYY-MM-DD"),productos:[{item:"",cantidad:1,precio:0}]})}})})}),Object(f.jsx)(E.a,{orientation:"left",children:"Movimientos"}),Object(f.jsx)(ne.a,{spinning:h,delay:500,size:"large",tip:"Procesando...",children:Object(f.jsx)(R.a,{gutter:[16,24],children:Object(f.jsx)(K.a,{tableLayout:"fixed",loading:S,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:w,columns:x},"_id")})}),Object(f.jsx)(B.a,{title:"Movimiento",width:720,height:600,onClose:function(){J(!1)},visible:W,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(f.jsxs)(v.a,{form:t,name:"formmovimiento",initialValues:{remember:!0},onValuesChange:function(e,a){var n=Object(V.a)(a.productos),r=0;a.productos.forEach((function(e,a){e&&e.cantidad&&e.precio&&(e.total=e.cantidad*e.precio,r+=e.total,n.splice(a,1,e),t.setFieldsValue({productos:n}))}));var c=new Ce.Decimal(r);t.setFieldsValue({subtotal:c,iva:c.mul(.12),total:c.mul(1.12)})},onFinish:function(e){P({_id:F._id,codigo:e.codigo,fecha:new Date(e.fecha.toISOString().substr(0,10)),subtotal:e.subtotal,iva:e.iva,descuento:e.descuento,total:e.total});var t=[];e.productos.forEach((function(e){t.push({cantidad:e.cantidad,precio:e.precio,item:{_id:e.item,nombre:"",categoria:"",precio:0,estado:!0},_id:""})}));var a=L.filter((function(t){return t._id===e.cliente}))[0];me(F._id,{codigo:e.codigo,fecha:e.fecha.format("YYYY-MM-DD"),cliente:e.cliente,productos:e.productos,subtotal:e.subtotal,iva:e.iva,descuento:e.descuento,total:e.total}).then((function(n){F._id.length>0?C(w.map((function(n){return n._id===F._id?Object(q.a)(Object(q.a)({},n),{},{codigo:e.codigo,fecha:Ie()(e.fecha,"YYYY-MM-DD").toDate(),cliente:{_id:a._id,nombre:a.nombre,direccion:a.direccion,telefono:a.telefono,identificacion:a.identificacion,correoelectronico:a.correoelectronico,estado:!0},descuento:e.descuento,iva:e.iva,subtotal:e.subtotal,total:e.total,productos:t}):n}))):C([].concat(Object(V.a)(w),[Object(q.a)(Object(q.a)({},n),{},{cliente:{_id:a._id,nombre:a.nombre,direccion:a.direccion,telefono:a.telefono,identificacion:a.identificacion,correoelectronico:a.correoelectronico,estado:!0}})])),A.b.success("Se almacen\xf3 correctamente el movimiento"),J(!1)})).catch((function(e){A.b.error("Se presentaron errores al intentar almacenar los movimientos")}))},onFinishFailed:function(){},autoComplete:"off",children:[Object(f.jsx)(v.a.Item,{label:"C\xf3digo",name:"codigo",style:{width:300},rules:[{required:!0,message:"Por favor ingrese el c\xf3digo"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Fecha",name:"fecha",children:Object(f.jsx)(re.a,{})}),Object(f.jsx)(v.a.Item,{label:"Cliente",name:"cliente",children:Object(f.jsx)(te.a,{showSearch:!0,style:{width:400},placeholder:"Selecciona una persona",optionFilterProp:"children",onChange:function(){},onSearch:function(){},filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},children:L.map((function(e){var t=e._id,a=e.nombre;return Object(f.jsx)(Fe,{value:t,children:a},t)}))})}),Object(f.jsx)(v.a.Item,{children:Object(f.jsx)(k.a,{type:"dashed",onClick:function(){j(!0),l({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),r.setFieldsValue({identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""})},icon:Object(f.jsx)(G.a,{}),children:"Agregar"})}),Object(f.jsx)(v.a.List,{name:"productos",children:function(e,t){var a=t.add,n=t.remove;return Object(f.jsxs)(f.Fragment,{children:[e.map((function(e){return Object(f.jsxs)(ae.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(f.jsx)(v.a.Item,{name:[e.name,"item"],fieldKey:[e.fieldKey,"item"],children:Object(f.jsx)(te.a,{showSearch:!0,style:{width:400},placeholder:"Seleccione producto",optionFilterProp:"children",onChange:function(){},onSearch:function(){},filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},children:M.map((function(e){var t=e._id,a=e.nombre;return Object(f.jsx)(Fe,{value:t,children:a},t)}))})}),Object(f.jsx)(v.a.Item,Object(q.a)(Object(q.a)({},e),{},{name:[e.name,"cantidad"],fieldKey:[e.fieldKey,"cantidad"],rules:[{required:!0,message:"Debe ubicar el cantidad"}],children:Object(f.jsx)(ce.a,{placeholder:"Cantidad"})})),Object(f.jsx)(v.a.Item,Object(q.a)(Object(q.a)({},e),{},{name:[e.name,"precio"],fieldKey:[e.fieldKey,"precio"],rules:[{required:!0,message:"Debe ubicar el precio"}],children:Object(f.jsx)(ce.a,{placeholder:"Precio"})})),Object(f.jsx)(v.a.Item,Object(q.a)(Object(q.a)({noStyle:!0},e),{},{name:[e.name,"total"],fieldKey:[e.fieldKey,"total"],children:Object(f.jsx)(y.a,{disabled:!0,placeholder:"Total"})})),Object(f.jsx)(se.a,{onClick:function(){n(e.name)}})]},e.key)})),Object(f.jsx)(v.a.Item,{children:Object(f.jsx)(k.a,{type:"dashed",onClick:function(){return a()},block:!0,icon:Object(f.jsx)(G.a,{}),children:"Agregar"})})]})}}),Object(f.jsx)(v.a.Item,{label:"Subtotal",name:"subtotal",style:{width:300},children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Iva",name:"iva",style:{width:300},children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Descuento",name:"descuento",style:{width:300},children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Total",name:"total",style:{width:300},children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{wrapperCol:{offset:8,span:16},children:Object(f.jsx)(k.a,{type:"primary",htmlType:"submit",icon:Object(f.jsx)(H.a,{}),children:"Guardar"})})]})}),Object(f.jsx)(_e,{Forma:r,persona:s,setpersona:l,personas:L,setPersonas:Y,formulario:b,setformulario:j})]})},De=a(303),Le=a(298),Ye=a(299),Me=a(312),ze=te.a.Option,Te=function(){var e=v.a.useForm(),t=Object(o.a)(e,1)[0],a=[{title:"Foto",key:"foto",render:function(e){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(De.a,{src:ve(e.img||"")},e._id)})}},Object(q.a)(Object(q.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",render:function(e){return e}},$()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),{title:"Categoria",dataIndex:["categoria","nombre"],key:"categoria"},{title:"Precio",dataIndex:"precio",key:"precio"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(N.a,{}),onClick:function(){I(!0),g(e),t.setFieldsValue({nombre:e.nombre,precio:e.precio,costo:e.costo,minimo:e.minimo,categoria:e.categoria._id})}})}}],r=ke(),c=r.productos,i=r.setProductos,s=r.isLoading,d=X().categorias,b=Object(n.useState)(),j=Object(o.a)(b,2),m=j[0],p=j[1],h=Object(n.useState)({_id:"",nombre:"",precio:0,categoria:{_id:"",nombre:""}}),O=Object(o.a)(h,2),x=O[0],g=O[1],w=Object(n.useState)(!1),C=Object(o.a)(w,2),S=C[0],I=C[1],_=[],F=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({_id:x._id,nombre:t.nombre,precio:t.precio,costo:t.costo,minimo:t.minimo,categoria:{_id:t.categoria,nombre:""}}),a="",t.categoria&&t.categoria.length>0&&(a=d.filter((function(e){return e._id===t.categoria}))[0].nombre),e.next=5,we(Object(q.a)(Object(q.a)({},t),{},{categoria:t.categoria,id:x._id}));case 5:return n=e.sent,_=x._id.length>0?c.map((function(e){return e._id===x._id?Object(q.a)(Object(q.a)({},e),{},{nombre:t.nombre,precio:t.precio,costo:t.costo,minimo:t.minimo,idaux:"",img:n.img,categoria:{_id:t.categoria,nombre:a}}):e})):[].concat(Object(V.a)(c),[n]),e.next=9,ye(n._id,m);case 9:r=e.sent,_=_.map((function(e){return e._id===r._id?Object(q.a)(Object(q.a)({},e),{},{img:r.img}):e})),i(_),A.b.success("Se almacen\xf3 correctamente el producto"),I(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(R.a,{gutter:12,children:Object(f.jsx)(U.a,{span:12,offset:12,children:Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(G.a,{}),size:"large",onClick:function(){I(!0),g({_id:"",nombre:"",precio:0,costo:0,minimo:0,categoria:{_id:"",nombre:""}}),t.setFieldsValue({nombre:"",precio:0,costo:0,minimo:0,categoria:""}),i(c.map((function(e){return Object(q.a)(Object(q.a)({},e),{},{idaux:e._id})})))}})})}),Object(f.jsx)(E.a,{orientation:"left",children:"Productos"}),Object(f.jsx)(R.a,{gutter:[16,24],children:Object(f.jsx)(K.a,{tableLayout:"fixed",loading:s,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:c,columns:a},"_id")}),Object(f.jsx)(B.a,{title:"Items",width:720,height:400,onClose:function(){I(!1)},visible:S,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(f.jsxs)(v.a,{form:t,name:"formcategoria",labelCol:{span:4},wrapperCol:{span:12},initialValues:{remember:!0},onFinish:F,onFinishFailed:function(){},autoComplete:"off",children:[Object(f.jsx)(v.a.Item,{label:"Descripci\xf3n",name:"nombre",rules:[{required:!0,message:"Por favor ingrese la descripci\xf3n"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Costo",name:"costo",children:Object(f.jsx)(ce.a,{})}),Object(f.jsx)(v.a.Item,{label:"M\xednimo",name:"minimo",children:Object(f.jsx)(ce.a,{})}),Object(f.jsx)(v.a.Item,{label:"Precio",name:"precio",children:Object(f.jsx)(ce.a,{min:"0.01"})}),Object(f.jsx)(v.a.Item,{label:"Categoria",name:"categoria",children:Object(f.jsx)(te.a,{showSearch:!0,style:{width:400},placeholder:"Select a person",optionFilterProp:"children",onChange:function(){},onSearch:function(){},filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},children:d.map((function(e){var t=e._id,a=e.nombre;return Object(f.jsx)(ze,{value:t,children:a},t)}))})}),Object(f.jsx)(v.a.Item,{label:"Foto",name:"foto",children:Object(f.jsx)(Le.a,{listType:"picture",maxCount:1,beforeUpload:function(e){p(e)},children:Object(f.jsx)(k.a,{icon:Object(f.jsx)(Me.a,{}),children:"Subir (Max: 1)"})})}),x.img&&Object(f.jsx)(v.a.Item,{children:Object(f.jsx)(Ye.a,{width:200,src:ve(x.img)})}),Object(f.jsx)(v.a.Item,{wrapperCol:{offset:8,span:16},children:Object(f.jsx)(k.a,{type:"primary",htmlType:"submit",icon:Object(f.jsx)(H.a,{}),children:"Guardar"})})]})})]})},Ve=function(){var e=v.a.useForm(),t=Object(o.a)(e,1)[0],a=[Object(q.a)(Object(q.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",render:function(e){return e}},$()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),{title:"Usuario",dataIndex:["usuario","nombre"],key:"usuario"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(N.a,{}),onClick:function(){h(!0),b(e),t.setFieldsValue({identificacion:e.identificacion,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,correoelectronico:e.correoelectronico})}})}}],r=Oe(),c=r.isLoading,i=r.personas,s=r.setPersonas,l=Object(n.useState)({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),u=Object(o.a)(l,2),d=u[0],b=u[1],j=Object(n.useState)(!1),m=Object(o.a)(j,2),p=m[0],h=m[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(R.a,{gutter:12,children:Object(f.jsx)(U.a,{span:12,offset:12,children:Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(G.a,{}),size:"large",onClick:function(){h(!0),b({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),t.setFieldsValue({identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""})}})})}),Object(f.jsx)(E.a,{orientation:"left",children:"Clientes"}),Object(f.jsx)(R.a,{gutter:[16,24],children:Object(f.jsx)(K.a,{tableLayout:"fixed",loading:c,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:i,columns:a})}),Object(f.jsx)(_e,{Forma:t,persona:d,setpersona:b,personas:i,setPersonas:s,formulario:p,setformulario:h})]})},qe=localStorage.getItem("token")||"",Ae=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/pacientes");case 2:return t=e.sent,e.abrupt("return",t.data.pacientes);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t._id.length>0)){e.next=6;break}return e.next=3,b.put("/pacientes/".concat(t._id),t,{headers:{"x-token":qe}});case 3:a=e.sent,e.next=9;break;case 6:return e.next=8,b.post("/pacientes",t,{headers:{"x-token":qe}});case 8:a=e.sent;case 9:return e.abrupt("return",a.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(e){var t,a;return"".concat(null===(t=b.defaults.baseURL)||void 0===t?void 0:t.substr(0,null===(a=b.defaults.baseURL)||void 0===a?void 0:a.lastIndexOf("/")),"/uploads/pacientes/").concat(e)},Ee=function(e){var t,a;return"".concat(null===(t=b.defaults.baseURL)||void 0===t?void 0:t.substr(0,null===(a=b.defaults.baseURL)||void 0===a?void 0:a.lastIndexOf("/")),"/uploads/citas/").concat(e)},Ke=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("archivo",a),e.next=4,b.put("/uploads/pacientes/".concat(t),n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Be=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("archivo",a),e.next=4,b.put("/uploads/citas/".concat(t),n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.length>1&&void 0!==r[1]?r[1]:"",!(t._id.length>0)){e.next=7;break}return e.next=4,b.put("/citas/".concat(t._id),t,{headers:{"x-token":qe}});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,b.post("/citas/".concat(a),t,{headers:{"x-token":qe}});case 9:n=e.sent;case 10:return e.abrupt("return",n.data);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=v.a.useForm(),t=Object(o.a)(e,1)[0],a=v.a.useForm(),r=Object(o.a)(a,1)[0],c=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),i=Object(o.a)(c,2),s=i[0],l=i[1],u=Object(n.useState)([]),d=Object(o.a)(u,2),b=d[0],j=d[1];return Object(n.useEffect)((function(){Ae().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,pacientes:s,setPacientes:l,citas:b,setCitas:j}}(),i=c.pacientes,s=c.setPacientes,d=c.isLoading,b=c.citas,j=c.setCitas,m=Object(n.useState)(),p=Object(o.a)(m,2),h=p[0],O=p[1],x=Object(n.useState)(),g=Object(o.a)(x,2),w=g[0],C=g[1],S=Object(n.useState)({_id:"",nombre:"",rut:"",direccion:"",telefono:"",citas:[],fechanacimiento:new Date,alergia:"",sexo:"",email:"",nacionalidad:"",previsionsalud:"",otrosdatos:""}),I=Object(o.a)(S,2),_=I[0],F=I[1],P=Object(n.useState)({_id:"",anamnesis:"",diagnostico:"",estatura:"",fechaproximaatencion:new Date,imc:"",medicamento:"",peso:"",presionalterial:"",pulso:"",temperatura:"",tratamiento:"",fecha:new Date,hemo:""}),D=Object(o.a)(P,2),L=D[0],Y=D[1],M=Object(n.useState)(!1),z=Object(o.a)(M,2),T=z[0],W=z[1],J=Object(n.useState)(!1),Q=Object(o.a)(J,2),X=Q[0],Z=Q[1],ee=Object(n.useState)(""),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],ce=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={_id:ae,peso:t.peso,estatura:t.estatura,temperatura:t.temperatura,presionalterial:t.presionalterial,imc:t.imc,pulso:t.pulso,hemo:t.hemo,fecha:new Date(t.fecha.toISOString().substr(0,10)),anamnesis:t.anamnesis,diagnostico:t.diagnostico,tratamiento:t.tratamiento,medicamento:t.medicamento,fechaproximaatencion:new Date(t.fechaproximaatencion.toISOString().substr(0,10))},e.next=3,Ne(Object(q.a)({},a),_._id);case 3:if(n=e.sent,r=Object(q.a)({},n),!w){e.next=10;break}return e.next=8,Be(n._id,w);case 8:r=e.sent,A.b.success("Cita realizada en fecha ".concat(r.fecha.toString()," ahora tiene adjunto"));case 10:ae.length>0?(s(i.map((function(e){var t;return e._id===_._id?Object(q.a)(Object(q.a)({},e),{},{citas:null===(t=e.citas)||void 0===t?void 0:t.map((function(e){return e._id===ae?Object(q.a)(Object(q.a)({},e),{},{anamnesis:a.anamnesis,fecha:a.fecha}):e}))}):e}))),j(b.map((function(e){return e._id===ae?Object(q.a)(Object(q.a)({},e),{},{anamnesis:a.anamnesis,fecha:a.fecha,medicamento:t.medicamento,peso:t.peso,presionalterial:t.presionalterial,estatura:t.estatura,temperatura:t.temperatura,imc:t.imc,pulso:t.pulso,hemo:t.hemo,fechaproximaatencion:new Date(t.fechaproximaatencion.toISOString().substr(0,10)),img:r.img}):e})))):(s(i.map((function(e){return e._id===_._id?Object(q.a)(Object(q.a)({},e),{},{citas:[].concat(Object(V.a)(e.citas),[n])}):e}))),j([].concat(Object(V.a)(b),[r]))),A.b.success("Se almacen\xf3 correctamente la cita"),Z(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={_id:_._id,rut:t.rut,nombre:t.nombre,direccion:t.direccion,telefono:t.telefono,fechanacimiento:new Date(t.fechanacimiento.toISOString().substr(0,10)),previsionsalud:t.previsionsalud,otrosdatos:t.otrosdatos,alergia:t.alergia,sexo:t.sexo,email:t.email,nacionalidad:t.nacionalidad},F(a),e.next=4,Re(a);case 4:if(n=e.sent,r=Object(q.a)({},n),!h){e.next=11;break}return e.next=9,Ke(n._id,h);case 9:r=e.sent,A.b.success(" ".concat(r.nombre," ahora tiene nueva foto"));case 11:a._id.length>0?s(i.map((function(e){return e._id===a._id?Object(q.a)(Object(q.a)({},e),{},{nombre:t.nombre,direccion:t.direccion,telefono:t.telefono,otrosdatos:t.otrosdatos,alergia:t.alergia,rut:t.rut,fechanacimiento:new Date(t.fechanacimiento.toISOString().substr(0,10)),previsionsalud:t.previsionsalud,sexo:t.sexo,nacionalidad:t.nacionalidad,email:t.email,img:r.img}):e}))):s([].concat(Object(V.a)(i),[Object(q.a)({},r)])),A.b.success("Se almacen\xf3 correctamente el paciente"),W(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=[{title:"Fecha",dataIndex:"fecha",key:"fecha",render:function(e){return"string"===typeof e?e.substr(0,10):Ie()(e).format("YYYY-MM-DD")}},{title:"Anamnesis",dataIndex:"anamnesis",key:"anamnesis"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(N.a,{}),onClick:function(){C(void 0),r.resetFields(),ne(e._id),Y(e),Z(!0),r.setFieldsValue({estatura:e.estatura,peso:e.peso,temperatura:e.temperatura,presionalterial:e.presionalterial,imc:e.imc,pulso:e.pulso,hemo:e.hemo,fecha:Ie()(e.fecha,"YYYY-MM-DD"),anamnesis:e.anamnesis,diagnostico:e.diagnostico,tratamiento:e.tratamiento,medicamento:e.medicamento,fechaproximaatencion:Ie()(e.fechaproximaatencion,"YYYY-MM-DD")})}})}}],se=[Object(q.a)(Object(q.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",render:function(e){return e}},$()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),{title:"RUT",dataIndex:"rut",key:"rut"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(N.a,{}),onClick:function(){W(!0),F(e),O(void 0),t.resetFields(),j(e.citas),t.setFieldsValue({rut:e.rut,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,email:e.email,sexo:e.sexo,nacionalidad:e.nacionalidad,alergia:e.alergia,previsionsalud:e.previsionsalud,otrosdatos:e.otrosdatos,fechanacimiento:Ie()(e.fechanacimiento,"YYYY-MM-DD")})}})}}];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(R.a,{gutter:12,children:Object(f.jsx)(U.a,{span:12,offset:12,children:Object(f.jsx)(k.a,{type:"primary",shape:"circle",icon:Object(f.jsx)(G.a,{}),size:"large",onClick:function(){O(void 0),t.resetFields(),W(!0),F({_id:"",rut:"",nombre:"",direccion:"",telefono:"",alergia:"",citas:[],fechanacimiento:new Date,sexo:"",nacionalidad:"",email:"",previsionsalud:"",otrosdatos:""}),j([]),t.setFieldsValue({rut:"",nombre:"",direccion:"",telefono:"",alergia:"",citas:[],fechanacimiento:Ie()(new Date,"YYYY-MM-DD"),sexo:"",nacionalidad:"",email:"",previsionsalud:"",otrosdatos:""})}})})}),Object(f.jsx)(E.a,{orientation:"left",children:"Pacientes"}),Object(f.jsx)(R.a,{gutter:[16,24],children:Object(f.jsx)(K.a,{tableLayout:"fixed",loading:d,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:i,columns:se})}),Object(f.jsx)(B.a,{title:"Paciente",width:720,height:650,onClose:function(){W(!1)},visible:T,bodyStyle:{paddingBottom:60},placement:"bottom",children:Object(f.jsxs)(R.a,{children:[Object(f.jsx)(U.a,{xs:2,sm:4,md:6,lg:8,xl:12,children:Object(f.jsxs)(v.a,{form:t,name:"formpaciente",labelCol:{span:3},wrapperCol:{span:16},size:"small",initialValues:{remember:!0},onFinish:ie,onFinishFailed:function(){},autoComplete:"off",children:[Object(f.jsx)(v.a.Item,{label:"Foto",name:"foto",children:Object(f.jsx)(Le.a,{listType:"picture",maxCount:1,showUploadList:!0,beforeUpload:function(e){O(e)},children:Object(f.jsx)(k.a,{icon:Object(f.jsx)(Me.a,{}),children:"Subir (Max: 1)"})})}),_.img&&Object(f.jsx)(v.a.Item,{children:Object(f.jsx)(Ye.a,{width:200,src:Ue(_.img)})}),Object(f.jsx)(v.a.Item,{label:"RUT",name:"rut",rules:[{required:!0,message:"Por favor ingrese el RUT"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Nombre",name:"nombre",rules:[{required:!0,message:"Por favor ingrese el Nombre"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Direcci\xf3n",name:"direccion",children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Tel\xe9fono",name:"telefono",children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"E-mail",name:"email",children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"F. Nacimiento",name:"fechanacimiento",children:Object(f.jsx)(re.a,{})}),Object(f.jsx)(v.a.Item,{label:"Sexo",name:"sexo",children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Nacionalidad",name:"nacionalidad",children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Alergia",name:"alergia",children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Provisi\xf3n S.",name:"previsionsalud",children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Otros datos",name:"otrosdatos",children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{wrapperCol:{offset:8,span:16},children:Object(f.jsx)(k.a,{type:"primary",htmlType:"submit",icon:Object(f.jsx)(H.a,{}),children:"Guardar"})})]})}),Object(f.jsxs)(U.a,{xs:2,sm:4,md:6,lg:8,xl:10,children:[Object(f.jsx)(R.a,{gutter:12,children:Object(f.jsx)(U.a,{span:12,offset:12,children:Object(f.jsx)(k.a,{type:"primary",shape:"circle",disabled:0===_._id.length,icon:Object(f.jsx)(G.a,{}),size:"large",onClick:function(){C(void 0),r.resetFields(),ne(""),Z(!0),r.setFieldsValue({estatura:"",peso:"",temperatura:"",presionalterial:"",imc:"",pulso:"",hemo:"",fecha:Ie()(new Date,"YYYY-MM-DD"),anamnesis:"",diagnostico:"",tratamiento:"",medicamento:"",fechaproximaatencion:Ie()(new Date,"YYYY-MM-DD")})}})})}),Object(f.jsx)(E.a,{orientation:"left",children:"Citas"}),Object(f.jsx)(R.a,{gutter:[16,24],children:Object(f.jsx)(K.a,{tableLayout:"fixed",loading:d,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:b,columns:oe})})]})]})}),Object(f.jsx)(B.a,{title:"Cita",width:720,height:650,onClose:function(){Z(!1)},visible:X,bodyStyle:{paddingBottom:60},placement:"bottom",children:Object(f.jsx)(v.a,{form:r,name:"formcita",labelCol:{span:8},wrapperCol:{span:16},size:"small",initialValues:{remember:!0},onFinish:ce,onFinishFailed:function(){},autoComplete:"off",children:Object(f.jsxs)(R.a,{children:[Object(f.jsxs)(U.a,{xs:2,sm:4,md:6,lg:8,xl:12,children:[Object(f.jsx)(v.a.Item,{label:"Peso",name:"peso",rules:[{required:!0,message:"Por favor ingrese peso"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Estatura",name:"estatura",rules:[{required:!0,message:"Por favor ingrese estatura"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Temperatura",name:"temperatura",rules:[{required:!0,message:"Por favor ingrese temperatura"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Presi\xf3n Alterial",name:"presionalterial",rules:[{required:!0,message:"Por favor ingrese presi\xf3n alterial"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"IMC",name:"imc",rules:[{required:!0,message:"Por favor ingrese IMC"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Pulso",name:"pulso",rules:[{required:!0,message:"Por favor ingrese pulso"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Hemo",name:"hemo",rules:[{required:!0,message:"Por favor ingrese pulso"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Fecha",name:"fecha",children:Object(f.jsx)(re.a,{})}),Object(f.jsx)(v.a.Item,{label:"Anamnesis",name:"anamnesis",rules:[{required:!0,message:"Por favor ingrese anamnesis"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Diagn\xf3stico",name:"diagnostico",rules:[{required:!0,message:"Por favor ingrese diagn\xf3stico"}],children:Object(f.jsx)(y.a,{})})]}),Object(f.jsxs)(U.a,{xs:2,sm:4,md:6,lg:8,xl:10,children:[Object(f.jsx)(v.a.Item,{label:"Tratamiento",name:"tratamiento",rules:[{required:!0,message:"Por favor ingrese tratamiento"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Medicamento",name:"medicamento",rules:[{required:!0,message:"Por favor ingrese medicamento"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{label:"Pr\xf3xima atenci\xf3n",name:"fechaproximaatencion",children:Object(f.jsx)(re.a,{})}),Object(f.jsx)(v.a.Item,{label:"Adjunto",name:"adjunto",children:Object(f.jsx)(Le.a,{listType:"text",maxCount:1,showUploadList:!0,beforeUpload:function(e){C(e)},children:Object(f.jsx)(k.a,{icon:Object(f.jsx)(Me.a,{}),children:"Subir (Max: 1)"})})}),L.img&&Object(f.jsx)("a",{href:Ee(L.img),children:"Dar clicl para descargar"}),Object(f.jsx)(v.a.Item,{wrapperCol:{offset:8,span:16},children:Object(f.jsx)(k.a,{type:"primary",htmlType:"submit",icon:Object(f.jsx)(H.a,{}),children:"Guardar cita"})})]})]})})})]})},He=I.a.Header,We=I.a.Content,Je=I.a.Footer,Qe=I.a.Sider,Xe=_.a.SubMenu,Ze=function(){return Object(f.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:Object(f.jsx)("path",{d:"M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"})})},$e=function(e){return Object(f.jsx)(S.a,{component:Ze,style:{color:"hotpink"}})},et=function(){var e,t=function(e){switch(e){case"UserOutlined":return Object(f.jsx)(P.a,{});case"DollarOutlined":return Object(f.jsx)(D.a,{});case"BarcodeOutlined":return Object(f.jsx)(L.a,{});case"ShoppingCartOutlined":return Object(f.jsx)(Y.a,{});case"MedicineBoxOutlined":return Object(f.jsx)(M.a,{});default:return Object(f.jsx)(z.a,{})}},a=Object(n.useContext)(h),r=a.logout,c=a.auth;Object(n.useEffect)((function(){console.log(c)}),[c]);var i=Object(n.useState)(!1),s=Object(o.a)(i,2),l=s[0],u=s[1];return Object(f.jsx)(F.a,{children:Object(f.jsxs)(I.a,{style:{minHeight:"100vh"},children:[Object(f.jsxs)(Qe,{collapsible:!0,collapsed:l,onCollapse:function(e){u(e)},children:[Object(f.jsx)("div",{className:"logo"}),Object(f.jsxs)(_.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[null===(e=c.opciones)||void 0===e?void 0:e.map((function(e){var a;return 1===e.clave.split("_").length&&Object(f.jsx)(Xe,{icon:t(e.ruta),title:e.titulo,children:null===(a=c.opciones)||void 0===a?void 0:a.filter((function(t){return t.clave.startsWith(e.clave+"_")})).map((function(e){var a;return 2===e.clave.split("_").length?e.ruta.includes("/")?Object(f.jsx)(_.a.Item,{children:Object(f.jsx)(F.b,{to:e.ruta,children:e.titulo})},e.clave):Object(f.jsx)(Xe,{icon:t(e.ruta),title:e.titulo,children:null===(a=c.opciones)||void 0===a?void 0:a.filter((function(t){return t.clave.startsWith(e.clave+"_")})).map((function(e){return Object(f.jsx)(_.a.Item,{children:Object(f.jsx)(F.b,{to:e.ruta,children:e.titulo})},e.clave)}))},e.clave):Object(f.jsx)("h1",{children:"ok"})}))},e.clave)})),Object(f.jsx)(Xe,{icon:Object(f.jsx)(T.a,{}),title:"Configurar",children:Object(f.jsx)(_.a.Item,{onClick:function(){r()},icon:Object(f.jsx)($e,{}),children:"Salir de la App "},"11")},"sub3")]})]}),Object(f.jsxs)(I.a,{className:"site-layout",children:[Object(f.jsx)(He,{className:"site-layout-background",style:{padding:0}}),Object(f.jsx)(We,{style:{margin:"16px 16px"},children:Object(f.jsxs)(g.d,{children:[Object(f.jsx)(g.b,{exact:!0,path:"/app/categorias",component:ee}),Object(f.jsx)(g.b,{exact:!0,path:"/app/productos",component:Te}),Object(f.jsx)(g.b,{exact:!0,path:"/app/clientes",component:Ve}),Object(f.jsx)(g.b,{exact:!0,path:"/app/movimientos",component:Pe}),Object(f.jsx)(g.b,{exact:!0,path:"/app/pacientes",component:Ge}),Object(f.jsx)(g.a,{to:"/app/movimientos"})]})}),Object(f.jsx)(Je,{style:{textAlign:"center"},children:"Software Manta \xa92018 Created by ManTalents"})]})]})})},tt={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},at={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},nt=function(){var e=v.a.useForm(),t=Object(o.a)(e,1)[0];return Object(f.jsxs)(v.a,Object(q.a)(Object(q.a)({},tt),{},{form:t,name:"register",onFinish:function(e){console.log("Received values of form: ",e)},initialValues:{residence:["zhejiang","hangzhou","xihu"],prefix:"86"},scrollToFirstError:!0,children:[Object(f.jsx)(v.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(f.jsx)(y.a.Password,{})}),Object(f.jsx)(v.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}}],children:Object(f.jsx)(y.a.Password,{})}),Object(f.jsx)(v.a.Item,{name:"nickname",label:"Nickname",tooltip:"What do you want others to call you?",rules:[{required:!0,message:"Please input your nickname!",whitespace:!0}],children:Object(f.jsx)(y.a,{})}),Object(f.jsx)(v.a.Item,Object(q.a)(Object(q.a)({},at),{},{children:Object(f.jsx)(k.a,{type:"primary",htmlType:"submit",children:"Register"})}))]}))},rt=a(132),ct=["component","isAuthenticated"],it=function(e){var t=e.component,a=e.isAuthenticated,n=Object(rt.a)(e,ct);return Object(f.jsx)(g.b,Object(q.a)(Object(q.a)({},n),{},{render:function(e){return a?Object(f.jsx)(g.a,{to:"/app"}):Object(f.jsx)(t,Object(q.a)({},e))}}))},ot=["component","isAuthenticated"],st=function(e){var t=e.component,a=e.isAuthenticated,n=Object(rt.a)(e,ot);return Object(f.jsx)(g.b,Object(q.a)(Object(q.a)({},n),{},{render:function(e){return a?Object(f.jsx)(t,Object(q.a)({},e)):Object(f.jsx)(g.a,{to:"/auth"})}}))},lt=function(){var e=Object(n.useContext)(h),t=e.auth,a=e.verificaToken;return Object(n.useEffect)((function(){a()}),[a]),Object(f.jsx)(F.a,{children:Object(f.jsxs)(g.d,{children:[Object(f.jsx)(st,{isAuthenticated:t.logged,path:"/app",component:et}),Object(f.jsx)(it,{isAuthenticated:t.logged,exact:!0,path:"/auth/login",component:C}),Object(f.jsx)(it,{isAuthenticated:t.logged,exact:!0,path:"/auth/register",component:nt}),Object(f.jsx)(g.a,{to:"/auth/login"})]})})};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(x,{children:Object(f.jsx)(lt,{})})}),document.getElementById("root"))}},[[289,1,2]]]);
//# sourceMappingURL=main.1a4c6945.chunk.js.map