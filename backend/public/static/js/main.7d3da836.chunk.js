(this.webpackJsonpmantalents=this.webpackJsonpmantalents||[]).push([[0],{183:function(e,t){},229:function(e,t,a){},230:function(e,t,a){},308:function(e,t){},309:function(e,t){},310:function(e,t){},311:function(e,t){},312:function(e,t){},318:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(31),c=a.n(i),o=a(19),s=a(17),l=a.n(s),u=a(26),d=a(184),m=a.n(d).a.create({baseURL:"http://167.71.26.102:80/api"}),b=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.post("/auth/login",{correo:t,password:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token")||"",e.next=3,m.get("/auth",{headers:{"x-token":t}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=a(4),f=Object(n.createContext)({auth:{uid:"",checking:!0,logged:!0,name:"",email:"",opciones:[{_id:"",clave:"",ruta:"",titulo:""}]},login:function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),verificaToken:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){return!0}}),h={uid:"",checking:!0,logged:!1,name:"",email:"",opciones:[{_id:"",clave:"",ruta:"",titulo:""}]},O=function(e){var t=e.children,a=Object(n.useState)(h),r=Object(o.a)(a,2),i=r[0],c=r[1],s=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t,a);case 2:return(n=e.sent).usuario&&(localStorage.setItem("token",n.token),r=n.usuario,c({uid:r.uid,checking:!1,logged:!0,name:r.nombre,email:r.correo,opciones:r.opciones})),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),d=Object(n.useCallback)(Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=4;break}return c({uid:void 0,checking:!1,logged:!1,name:void 0,email:void 0,opciones:[]}),e.abrupt("return",!1);case 4:return e.next=6,j();case 6:if(!(t=e.sent)){e.next=14;break}return localStorage.setItem("token",t.token),a=t.usuario,c({uid:a.uid,checking:!1,logged:!0,name:a.nombre,email:a.correo,opciones:a.opciones}),e.abrupt("return",!0);case 14:return c({uid:void 0,checking:!1,logged:!1,name:void 0,email:void 0}),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)}))),[]);return Object(p.jsx)(f.Provider,{value:{auth:i,login:s,verificaToken:d,logout:function(){return localStorage.removeItem("token"),c({checking:!1,logged:!1}),!0}},children:t})},x=(a(229),a(230),a(39)),g=a(332),v=a(334),w=a(124),y=a(54),S=function(){var e=Object(n.useContext)(f).login,t=function(){var t=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(a.username,a.password);case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsxs)(g.a,{name:"basic",labelCol:{span:6},wrapperCol:{span:8},initialValues:{remember:!0},onFinish:t,onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(p.jsx)(v.a.Password,{})}),Object(p.jsx)(g.a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:Object(p.jsx)(w.a,{children:"Remember me"})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})},k=a(327),C=a(326),I=a(99),_=a(69),D=a(346),F=a(347),Y=a(348),M=a(349),P=a(350),L=a(351),T=a(352),z=a(353),A=a(35),E=a(16),V=a(199),R=a(323),U=a(324),H=a(325),q=a(328),N=a(336),K=a(338),B=a(339),G=a(340),W=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/categorias");case 2:return t=e.sent,e.abrupt("return",t.data.categorias);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token")||"",!(t._id.length>0)){e.next=7;break}return e.next=4,m.put("/categorias/".concat(t._id),t,{headers:{"x-token":a}});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,m.post("/categorias",t,{headers:{"x-token":a}});case 9:n=e.sent;case 10:return e.abrupt("return",n.data);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),s=c[0],l=c[1];return Object(n.useEffect)((function(){W().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,categorias:s,setCategorias:l}},X=a(148);function Z(){var e={current:null};return{filterDropdown:function(t){var a=t.setSelectedKeys,n=t.selectedKeys,r=t.confirm,i=t.clearFilters;return Object(p.jsxs)("div",{style:{padding:8},children:[Object(p.jsx)(v.a,{ref:function(t){return e.current=t},placeholder:"Search",value:n[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return r},style:{width:188,marginBottom:8,display:"block"}}),Object(p.jsx)(y.a,{type:"primary",onClick:function(){return r()},icon:Object(p.jsx)(X.a,{}),size:"small",style:{width:90,marginRight:8},children:"Buscar"}),Object(p.jsx)(y.a,{size:"small",style:{width:90},onClick:i,children:"Resetear"})]})},filterIcon:function(e){return Object(p.jsx)(X.a,{style:{color:e?"#1890ff":void 0}})},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){var t;return null===(t=e.current)||void 0===t?void 0:t.select()}))}}}var $=function(){var e=g.a.useForm(),t=Object(o.a)(e,1)[0],a=[Object(E.a)(Object(E.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",render:function(e){return e}},Z()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),{title:"Usuario",dataIndex:["usuario","nombre"],key:"usuario"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(K.a,{}),onClick:function(){h(!0),m(e),t.setFieldsValue({nombre:e.nombre})}})}}],r=Q(),i=r.categorias,c=r.setCategorias,s=r.isLoading,l=Object(n.useState)({_id:"",nombre:""}),u=Object(o.a)(l,2),d=u[0],m=u[1],b=Object(n.useState)(!1),j=Object(o.a)(b,2),f=j[0],h=j[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(B.a,{}),size:"large",onClick:function(){h(!0),m({_id:"",nombre:""}),t.setFieldsValue({nombre:""})}})})}),Object(p.jsx)(H.a,{orientation:"left",children:"Categorias/Grupos"}),Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(q.a,{tableLayout:"fixed",loading:s,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:i,columns:a})}),Object(p.jsx)(N.a,{title:"Categor\xeda",width:720,height:300,onClose:function(){h(!1)},visible:f,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(p.jsxs)(g.a,{form:t,name:"formcategoria",labelCol:{span:4},wrapperCol:{span:12},initialValues:{remember:!0},onFinish:function(e){m({_id:d._id,nombre:e.nombre}),J(Object(E.a)(Object(E.a)({},e),{},{_id:d._id})).then((function(t){d._id.length>0?c(i.map((function(t){return t._id===d._id?Object(E.a)(Object(E.a)({},t),{},{nombre:e.nombre}):t}))):c([].concat(Object(A.a)(i),[t])),V.b.success("Se almacen\xf3 correctamente la categor\xeda"),h(!1)})).catch((function(e){V.b.error("Se presentaron errores al intentar almacenar las categorias")}))},onFinishFailed:function(){},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"Descripci\xf3n",name:"nombre",rules:[{required:!0,message:"Por favor ingrese la descripci\xf3n"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(y.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(G.a,{}),children:"Guardar"})})]})})]})},ee=a(123),te=a(337),ae=a(189),ne=a(329),re=a(333),ie=a(341),ce=a(342),oe=a(343),se=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/movimientos");case 2:return t=e.sent,e.abrupt("return",t.data.movimientos);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("movimientos/ultimo");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/movimientos/electronica/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/uploads/facturas/".concat(t),{responseType:"blob"});case 2:a=e.sent,window.open(URL.createObjectURL(a.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("token")||"",!(t.length>0)){e.next=7;break}return e.next=4,m.put("/movimientos/".concat(t),a,{headers:{"x-token":n}});case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,m.post("/movimientos",a,{headers:{"x-token":n}});case 9:r=e.sent;case 10:return e.abrupt("return",r.data);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),be=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/personas");case 2:return t=e.sent,e.abrupt("return",t.data.personas);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token")||"",!(t._id.length>0)){e.next=7;break}return e.next=4,m.put("/personas/".concat(t._id),t,{headers:{"x-token":a}});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,m.post("/personas",t,{headers:{"x-token":a}});case 9:n=e.sent;case 10:return e.abrupt("return",n.data);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),s=c[0],l=c[1];return Object(n.useEffect)((function(){be().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,personas:s,setPersonas:l}},fe=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/productos");case 2:return(t=e.sent).data.productos.map((function(e){return e.idaux=e._id})),e.abrupt("return",t.data.productos);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(e){var t,a;return"".concat(null===(t=m.defaults.baseURL)||void 0===t?void 0:t.substr(0,null===(a=m.defaults.baseURL)||void 0===a?void 0:a.lastIndexOf("/")),"/uploads/productos/").concat(e)},Oe=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("archivo",a),e.next=4,m.put("/uploads/productos/".concat(t),n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),xe=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token")||"",console.log(t),!(t.id.length>0)){e.next=8;break}return e.next=5,m.put("/productos/".concat(t.id),t,{headers:{"x-token":a}});case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,m.post("/productos",t,{headers:{"x-token":a}});case 10:n=e.sent;case 11:return e.abrupt("return",n.data);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),s=c[0],l=c[1];return Object(n.useEffect)((function(){fe().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,productos:s,setProductos:l}},ve=a(191),we=a(29),ye=a.n(we),Se=function(e){var t=e.Forma,a=e.persona,n=e.setpersona,r=e.personas,i=void 0===r?[]:r,c=e.setPersonas,o=e.formulario,s=e.setformulario;return Object(p.jsx)(N.a,{title:"Crear/Modificar Cliente",width:720,height:400,onClose:function(){s(!1)},visible:o,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(p.jsxs)(g.a,{form:t,name:"formcategoria",labelCol:{span:4},wrapperCol:{span:12},initialValues:{remember:!0},onFinish:function(e){n({_id:a._id,identificacion:e.identificacion,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,correoelectronico:e.correoelectronico}),je(Object(E.a)(Object(E.a)({},e),{},{_id:a._id})).then((function(t){a._id.length>0?c(i.map((function(t){return t._id===a._id?Object(E.a)(Object(E.a)({},t),{},{identificacion:e.identificacion,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,correoelectronico:e.correoelectronico}):t}))):(console.log(t),c([].concat(Object(A.a)(i),[t])),console.log(i)),V.b.success("Se almacen\xf3 correctamente el producto"),s(!1)})).catch((function(e){V.b.error("Se presentaron errores al intentar almacenar los productos")}))},onFinishFailed:function(){},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"Identificaci\xf3n",name:"identificacion",rules:[{required:!0,message:"Por favor ingrese la identificaci\xf3n"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Descripci\xf3n",name:"nombre",rules:[{required:!0,message:"Por favor ingrese la descripci\xf3n"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Direcci\xf3n",name:"direccion",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Tel\xe9fono",name:"telefono",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Correo Electr\xf3nico",name:"correoelectronico",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(y.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(G.a,{}),children:"Guardar"})})]})})},ke=ee.a.Option,Ce=function(){var e=g.a.useForm(),t=Object(o.a)(e,1)[0],a=g.a.useForm(),r=Object(o.a)(a,1)[0],i=Object(n.useState)({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),c=Object(o.a)(i,2),s=c[0],l=c[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),m=d[0],b=d[1],j=Object(n.useState)(!1),f=Object(o.a)(j,2),h=f[0],O=f[1],x=[Object(E.a)(Object(E.a)({title:"C\xf3digo",dataIndex:"codigo",key:"codigo",width:150,render:function(e){return e}},Z()),{},{onFilter:function(e,t){return t.codigo.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.codigo.length-t.codigo.length}}),{title:"Fecha",dataIndex:"fecha",key:"fecha",width:200,render:function(e){return"string"===typeof e?e.substr(0,10):ye()(e).format("YYYY-MM-DD")}},{title:"Cliente",dataIndex:["cliente","nombre"],key:"cliente"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(p.jsxs)(te.b,{children:[Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(K.a,{}),onClick:function(){var a,n;J(!0),F(e);var r=[];null===(a=e.productos)||void 0===a||a.forEach((function(e){r.push({item:e.item._id,cantidad:e.cantidad,precio:e.precio,total:e.cantidad*e.precio})})),t.setFieldsValue({codigo:e.codigo,cliente:null===(n=e.cliente)||void 0===n?void 0:n._id,subtotal:e.subtotal,iva:e.iva,descuento:e.descuento,total:e.total,fecha:ye()(e.fecha,"YYYY-MM-DD"),productos:r})}}),Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(ie.a,{}),onClick:function(){O(!0),ue(e._id).then((function(e){console.log(e.data[0]);var t="";t=e.data[0].RespuestaRecepcionComprobante?e.data[0].RespuestaRecepcionComprobante.comprobantes.comprobante.mensajes.mensaje.mensaje:e.data[0].RespuestaAutorizacionComprobante.autorizaciones.autorizacion.numeroAutorizacion,O(!1),V.b.success("Se presentaron los siguientes mensajes: ".concat(t," "))})).catch((function(e){console.log(e),O(!1),V.b.error("Se presentaron los siguientes mensajes")}))}}),Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(ce.a,{}),onClick:function(){de(e._id).then((function(e){console.log(e)}))}})]})}}],w=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),s=c[0],l=c[1];return Object(n.useEffect)((function(){se().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,movimientos:s,setMovimientos:l}}(),S=w.movimientos,k=w.setMovimientos,C=w.isLoading,I=Object(n.useState)({_id:"",fecha:new Date,iva:0,descuento:0,subtotal:0,total:0,codigo:""}),_=Object(o.a)(I,2),D=_[0],F=_[1],Y=pe(),M=Y.personas,P=Y.setPersonas,L=ge().productos,T=Object(n.useState)(!1),z=Object(o.a)(T,2),W=z[0],J=z[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(B.a,{}),size:"large",onClick:function(){le().then((function(e){t.setFieldsValue({codigo:parseInt(e.codigo)+1})})),J(!0),F({_id:"",fecha:new Date,codigo:"",subtotal:0,iva:0,total:0,descuento:0}),t.setFieldsValue({cliente:"",subtotal:0,iva:0,descuento:0,total:0,fecha:ye()(new Date,"YYYY-MM-DD"),productos:[{item:"",cantidad:1,precio:0}]})}})})}),Object(p.jsx)(H.a,{orientation:"left",children:"Movimientos"}),Object(p.jsx)(ae.a,{spinning:h,delay:500,size:"large",tip:"Procesando...",children:Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(q.a,{tableLayout:"fixed",loading:C,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:S,columns:x},"_id")})}),Object(p.jsx)(N.a,{title:"Movimiento",width:720,height:600,onClose:function(){J(!1)},visible:W,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(p.jsxs)(g.a,{form:t,name:"formmovimiento",initialValues:{remember:!0},onValuesChange:function(e,a){var n=Object(A.a)(a.productos),r=0;a.productos.forEach((function(e,a){e&&e.cantidad&&e.precio&&(e.total=e.cantidad*e.precio,r+=e.total,n.splice(a,1,e),t.setFieldsValue({productos:n}))}));var i=new ve.Decimal(r);t.setFieldsValue({subtotal:i,iva:i.mul(.12),total:i.mul(1.12)})},onFinish:function(e){F({_id:D._id,codigo:e.codigo,fecha:new Date(e.fecha.toISOString().substr(0,10)),subtotal:e.subtotal,iva:e.iva,descuento:e.descuento,total:e.total});var t=[];e.productos.forEach((function(e){t.push({cantidad:e.cantidad,precio:e.precio,item:{_id:e.item,nombre:"",categoria:"",precio:0,estado:!0},_id:""})}));var a=M.filter((function(t){return t._id===e.cliente}))[0];me(D._id,{codigo:e.codigo,fecha:e.fecha.format("YYYY-MM-DD"),cliente:e.cliente,productos:e.productos,subtotal:e.subtotal,iva:e.iva,descuento:e.descuento,total:e.total}).then((function(n){D._id.length>0?k(S.map((function(n){return n._id===D._id?Object(E.a)(Object(E.a)({},n),{},{codigo:e.codigo,fecha:ye()(e.fecha,"YYYY-MM-DD").toDate(),cliente:{_id:a._id,nombre:a.nombre,direccion:a.direccion,telefono:a.telefono,identificacion:a.identificacion,correoelectronico:a.correoelectronico,estado:!0},descuento:e.descuento,iva:e.iva,subtotal:e.subtotal,total:e.total,productos:t}):n}))):k([].concat(Object(A.a)(S),[Object(E.a)(Object(E.a)({},n),{},{cliente:{_id:a._id,nombre:a.nombre,direccion:a.direccion,telefono:a.telefono,identificacion:a.identificacion,correoelectronico:a.correoelectronico,estado:!0}})])),V.b.success("Se almacen\xf3 correctamente el movimiento"),J(!1)})).catch((function(e){V.b.error("Se presentaron errores al intentar almacenar los movimientos")}))},onFinishFailed:function(){},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"C\xf3digo",name:"codigo",style:{width:300},rules:[{required:!0,message:"Por favor ingrese el c\xf3digo"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Fecha",name:"fecha",children:Object(p.jsx)(ne.a,{})}),Object(p.jsx)(g.a.Item,{label:"Cliente",name:"cliente",children:Object(p.jsx)(ee.a,{showSearch:!0,style:{width:400},placeholder:"Selecciona una persona",optionFilterProp:"children",onChange:function(){},onSearch:function(){},filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},children:M.map((function(e){var t=e._id,a=e.nombre;return Object(p.jsx)(ke,{value:t,children:a},t)}))})}),Object(p.jsx)(g.a.Item,{children:Object(p.jsx)(y.a,{type:"dashed",onClick:function(){b(!0),l({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),r.setFieldsValue({identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""})},icon:Object(p.jsx)(B.a,{}),children:"Agregar"})}),Object(p.jsx)(g.a.List,{name:"productos",children:function(e,t){var a=t.add,n=t.remove;return Object(p.jsxs)(p.Fragment,{children:[e.map((function(e){return Object(p.jsxs)(te.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(p.jsx)(g.a.Item,{name:[e.name,"item"],fieldKey:[e.fieldKey,"item"],children:Object(p.jsx)(ee.a,{showSearch:!0,style:{width:400},placeholder:"Seleccione producto",optionFilterProp:"children",onChange:function(){},onSearch:function(){},filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},children:L.map((function(e){var t=e._id,a=e.nombre;return Object(p.jsx)(ke,{value:t,children:a},t)}))})}),Object(p.jsx)(g.a.Item,Object(E.a)(Object(E.a)({},e),{},{name:[e.name,"cantidad"],fieldKey:[e.fieldKey,"cantidad"],rules:[{required:!0,message:"Debe ubicar el cantidad"}],children:Object(p.jsx)(re.a,{placeholder:"Cantidad"})})),Object(p.jsx)(g.a.Item,Object(E.a)(Object(E.a)({},e),{},{name:[e.name,"precio"],fieldKey:[e.fieldKey,"precio"],rules:[{required:!0,message:"Debe ubicar el precio"}],children:Object(p.jsx)(re.a,{placeholder:"Precio"})})),Object(p.jsx)(g.a.Item,Object(E.a)(Object(E.a)({noStyle:!0},e),{},{name:[e.name,"total"],fieldKey:[e.fieldKey,"total"],children:Object(p.jsx)(v.a,{disabled:!0,placeholder:"Total"})})),Object(p.jsx)(oe.a,{onClick:function(){n(e.name)}})]},e.key)})),Object(p.jsx)(g.a.Item,{children:Object(p.jsx)(y.a,{type:"dashed",onClick:function(){return a()},block:!0,icon:Object(p.jsx)(B.a,{}),children:"Agregar"})})]})}}),Object(p.jsx)(g.a.Item,{label:"Subtotal",name:"subtotal",style:{width:300},children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Iva",name:"iva",style:{width:300},children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Descuento",name:"descuento",style:{width:300},children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Total",name:"total",style:{width:300},children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(y.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(G.a,{}),children:"Guardar"})})]})}),Object(p.jsx)(Se,{Forma:r,persona:s,setpersona:l,personas:M,setPersonas:P,formulario:m,setformulario:b})]})},Ie=a(335),_e=a(330),De=a(331),Fe=a(344),Ye=ee.a.Option,Me=function(){var e=g.a.useForm(),t=Object(o.a)(e,1)[0],a=[{title:"Foto",key:"foto",render:function(e){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Ie.a,{src:he(e.img||"")},e._id)})}},Object(E.a)(Object(E.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",render:function(e){return e}},Z()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),{title:"Categoria",dataIndex:["categoria","nombre"],key:"categoria"},{title:"Precio",dataIndex:"precio",key:"precio"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(K.a,{}),onClick:function(){I(!0),w(e),t.setFieldsValue({nombre:e.nombre,precio:e.precio,costo:e.costo,minimo:e.minimo,categoria:e.categoria._id})}})}}],r=ge(),i=r.productos,c=r.setProductos,s=r.isLoading,d=Q().categorias,m=Object(n.useState)(),b=Object(o.a)(m,2),j=b[0],f=b[1],h=Object(n.useState)({_id:"",nombre:"",precio:0,categoria:{_id:"",nombre:""}}),O=Object(o.a)(h,2),x=O[0],w=O[1],S=Object(n.useState)(!1),k=Object(o.a)(S,2),C=k[0],I=k[1],_=[],D=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w({_id:x._id,nombre:t.nombre,precio:t.precio,costo:t.costo,minimo:t.minimo,categoria:{_id:t.categoria,nombre:""}}),a="",t.categoria&&t.categoria.length>0&&(a=d.filter((function(e){return e._id===t.categoria}))[0].nombre),e.next=5,xe(Object(E.a)(Object(E.a)({},t),{},{categoria:t.categoria,id:x._id}));case 5:return n=e.sent,_=x._id.length>0?i.map((function(e){return e._id===x._id?Object(E.a)(Object(E.a)({},e),{},{nombre:t.nombre,precio:t.precio,costo:t.costo,minimo:t.minimo,idaux:"",img:n.img,categoria:{_id:t.categoria,nombre:a}}):e})):[].concat(Object(A.a)(i),[n]),e.next=9,Oe(n._id,j);case 9:r=e.sent,_=_.map((function(e){return e._id===r._id?Object(E.a)(Object(E.a)({},e),{},{img:r.img}):e})),c(_),V.b.success("Se almacen\xf3 correctamente el producto"),I(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(B.a,{}),size:"large",onClick:function(){I(!0),w({_id:"",nombre:"",precio:0,costo:0,minimo:0,categoria:{_id:"",nombre:""}}),t.setFieldsValue({nombre:"",precio:0,costo:0,minimo:0,categoria:""}),c(i.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{idaux:e._id})})))}})})}),Object(p.jsx)(H.a,{orientation:"left",children:"Productos"}),Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(q.a,{tableLayout:"fixed",loading:s,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:i,columns:a},"_id")}),Object(p.jsx)(N.a,{title:"Items",width:720,height:400,onClose:function(){I(!1)},visible:C,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(p.jsxs)(g.a,{form:t,name:"formcategoria",labelCol:{span:4},wrapperCol:{span:12},initialValues:{remember:!0},onFinish:D,onFinishFailed:function(){},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"Descripci\xf3n",name:"nombre",rules:[{required:!0,message:"Por favor ingrese la descripci\xf3n"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Costo",name:"costo",children:Object(p.jsx)(re.a,{})}),Object(p.jsx)(g.a.Item,{label:"M\xednimo",name:"minimo",children:Object(p.jsx)(re.a,{})}),Object(p.jsx)(g.a.Item,{label:"Precio",name:"precio",children:Object(p.jsx)(re.a,{min:"0.01"})}),Object(p.jsx)(g.a.Item,{label:"Categoria",name:"categoria",children:Object(p.jsx)(ee.a,{showSearch:!0,style:{width:400},placeholder:"Select a person",optionFilterProp:"children",onChange:function(){},onSearch:function(){},filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},children:d.map((function(e){var t=e._id,a=e.nombre;return Object(p.jsx)(Ye,{value:t,children:a},t)}))})}),Object(p.jsx)(g.a.Item,{label:"Foto",name:"foto",children:Object(p.jsx)(_e.a,{listType:"picture",maxCount:1,beforeUpload:function(e){f(e)},children:Object(p.jsx)(y.a,{icon:Object(p.jsx)(Fe.a,{}),children:"Subir (Max: 1)"})})}),x.img&&Object(p.jsx)(g.a.Item,{children:Object(p.jsx)(De.a,{width:200,src:he(x.img)})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(y.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(G.a,{}),children:"Guardar"})})]})})]})},Pe=function(){var e=g.a.useForm(),t=Object(o.a)(e,1)[0],a=[Object(E.a)(Object(E.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",render:function(e){return e}},Z()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),{title:"Usuario",dataIndex:["usuario","nombre"],key:"usuario"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(K.a,{}),onClick:function(){h(!0),m(e),t.setFieldsValue({identificacion:e.identificacion,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,correoelectronico:e.correoelectronico})}})}}],r=pe(),i=r.isLoading,c=r.personas,s=r.setPersonas,l=Object(n.useState)({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),u=Object(o.a)(l,2),d=u[0],m=u[1],b=Object(n.useState)(!1),j=Object(o.a)(b,2),f=j[0],h=j[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(B.a,{}),size:"large",onClick:function(){h(!0),m({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),t.setFieldsValue({identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""})}})})}),Object(p.jsx)(H.a,{orientation:"left",children:"Clientes"}),Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(q.a,{tableLayout:"fixed",loading:i,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:c,columns:a})}),Object(p.jsx)(Se,{Forma:t,persona:d,setpersona:m,personas:c,setPersonas:s,formulario:f,setformulario:h})]})},Le=a(203),Te=a(112),ze=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/pacientes");case 2:return t=e.sent,e.abrupt("return",t.data.pacientes);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/pacientes/cita/".concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(a=m.defaults.baseURL)||void 0===a?void 0:a.replace("api",""),e.next=3,m.get("".concat(n,"uploads/consultas/").concat(t,".pdf"),{responseType:"blob"});case 3:r=e.sent,window.open(URL.createObjectURL(r.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token")||"",e.prev=1,!(t._id.length>0)){e.next=8;break}return e.next=5,m.put("/pacientes/".concat(t._id),t,{headers:{"x-token":a}});case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,m.post("/pacientes",t,{headers:{"x-token":a}});case 10:n=e.sent;case 11:return e.abrupt("return",n.data);case 14:return e.prev=14,e.t0=e.catch(1),console.log(a),console.log(e.t0),e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),Re=function(e){var t,a;return"".concat(null===(t=m.defaults.baseURL)||void 0===t?void 0:t.substr(0,null===(a=m.defaults.baseURL)||void 0===a?void 0:a.lastIndexOf("/")),"/uploads/pacientes/").concat(e)},Ue=function(e){var t,a;return"".concat(null===(t=m.defaults.baseURL)||void 0===t?void 0:t.substr(0,null===(a=m.defaults.baseURL)||void 0===a?void 0:a.lastIndexOf("/")),"/uploads/citas/").concat(e)},He=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("archivo",a),e.next=4,m.put("/uploads/pacientes/".concat(t),n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),qe=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("archivo",a),e.next=4,m.put("/uploads/citas/".concat(t),n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:"",n=localStorage.getItem("token")||"",!(t._id.length>0)){e.next=8;break}return e.next=5,m.put("/citas/".concat(t._id),t,{headers:{"x-token":n}});case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,m.post("/citas/".concat(a),t,{headers:{"x-token":n}});case 10:r=e.sent;case 11:return e.abrupt("return",r.data);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),s=c[0],l=c[1],u=Object(n.useState)([]),d=Object(o.a)(u,2),m=d[0],b=d[1];return Object(n.useEffect)((function(){ze().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,pacientes:s,setPacientes:l,citas:m,setCitas:b}},Be=a(114),Ge=v.a.TextArea,We=function(e){var t=e.paciente,a=e.citaactual,n=e.cita,r=e.setcita,i=e.FormaCita,c=e.onFinishCita,o=e.cambiarAdjuntoBefore;return Object(p.jsx)(N.a,{title:"Consultas de: "+t.nombre,width:720,height:650,onClose:function(){r(!1)},visible:n,bodyStyle:{paddingBottom:60},placement:"bottom",children:Object(p.jsx)(g.a,{form:i,name:"formcita",labelCol:{span:8},wrapperCol:{span:16},size:"small",initialValues:{remember:!0},onFinish:c,onFinishFailed:function(){},autoComplete:"off",children:Object(p.jsxs)(R.a,{children:[Object(p.jsxs)(U.a,{xs:2,sm:4,md:6,lg:8,xl:12,children:[Object(p.jsx)(g.a.Item,{label:"Fecha",name:"fecha",children:Object(p.jsx)(ne.a,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm"})}),Object(p.jsx)(g.a.Item,{label:"Motivo de Consulta",name:"motivo",rules:[{required:!0,message:"Por favor ingrese motivo de la consulta"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"P/A",name:"presionalterial",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"FC",name:"pulso",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Estatura",name:"estatura",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Peso",name:"peso",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"IMC",name:"imc",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"T",name:"temperatura",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"HGT",name:"hemo",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"SpO2",name:"saturacion",children:Object(p.jsx)(v.a,{})})]}),Object(p.jsxs)(U.a,{xs:2,sm:4,md:6,lg:8,xl:10,children:[Object(p.jsx)(g.a.Item,{label:"Anamnesis",name:"anamnesis",rules:[{required:!0,message:"Por favor ingrese anamnesis"}],children:Object(p.jsx)(Ge,{})}),Object(p.jsx)(g.a.Item,{label:"Diagn\xf3sticos",name:"diagnostico",rules:[{required:!0,message:"Por favor ingrese diagn\xf3stico"}],children:Object(p.jsx)(Ge,{})}),Object(p.jsx)(g.a.Item,{label:"Tratamiento",name:"tratamiento",rules:[{required:!0,message:"Por favor ingrese tratamiento"}],children:Object(p.jsx)(Ge,{})}),Object(p.jsx)(g.a.Item,{label:"Pr\xf3xima Atenci\xf3n",name:"fechaproximaatencion",children:Object(p.jsx)(ne.a,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm"})}),Object(p.jsx)(g.a.Item,{label:"Adjunto",name:"adjunto",children:Object(p.jsx)(_e.a,{listType:"text",maxCount:1,showUploadList:!0,beforeUpload:o,children:Object(p.jsx)(y.a,{icon:Object(p.jsx)(Fe.a,{}),children:"Subir (Max: 1)"})})}),a.img&&Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(y.a,{type:"link",href:Ue(a.img),children:"Dar click"})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(y.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(G.a,{}),children:"Guardar cita"})})]})]})})})},Je=v.a.TextArea,Qe=function(){Be.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Be.c.version,"/pdf.worker.min.js");var e=g.a.useForm(),t=Object(o.a)(e,1)[0],a=g.a.useForm(),r=Object(o.a)(a,1)[0],i=Ke(),c=i.pacientes,s=i.setPacientes,d=i.isLoading,b=i.citas,j=i.setCitas,f=Object(n.useState)(),h=Object(o.a)(f,2),O=h[0],x=h[1],w=Object(n.useState)(),S=Object(o.a)(w,2),k=S[0],C=S[1],I=Object(n.useState)({_id:"",nombre:"",rut:"",direccion:"",telefono:"",citas:[],fechanacimiento:new Date,alergia:"",sexo:"",email:"",nacionalidad:"",previsionsalud:"",otrosdatos:"",estadocivil:""}),_=Object(o.a)(I,2),D=_[0],F=_[1],Y=Object(n.useState)({_id:"",anamnesis:"",diagnostico:"",estatura:"",fechaproximaatencion:new Date,imc:"",medicamento:"",peso:"",presionalterial:"",pulso:"",temperatura:"",tratamiento:"",fecha:new Date,hemo:"",motivo:"",saturacion:""}),M=Object(o.a)(Y,2),P=M[0],L=M[1],T=Object(n.useState)(!1),z=Object(o.a)(T,2),W=z[0],J=z[1],Q=Object(n.useState)(!1),X=Object(o.a)(Q,2),$=X[0],ee=X[1],te=Object(n.useState)(!1),ae=Object(o.a)(te,2),ie=ae[0],ce=ae[1],oe=Object(n.useState)(""),se=Object(o.a)(oe,2),le=se[0],ue=se[1],de=Object(n.useState)("http://localhost/uploads/consultas/61ad47a7684b9b03d15a1a2d.pdf"),me=Object(o.a)(de,2),be=me[0],je=me[1],pe=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={_id:le,peso:t.peso,estatura:t.estatura,temperatura:t.temperatura,presionalterial:t.presionalterial,imc:t.imc,pulso:t.pulso,hemo:t.hemo,fecha:new Date(t.fecha.toDate().toISOString()),anamnesis:t.anamnesis,diagnostico:t.diagnostico,tratamiento:t.tratamiento,medicamento:t.medicamento,motivo:t.motivo,saturacion:t.saturacion,fechaproximaatencion:new Date(t.fechaproximaatencion.toISOString())},e.next=3,Ne(Object(E.a)({},a),D._id);case 3:if(n=e.sent,r=Object(E.a)({},n),!k){e.next=10;break}return e.next=8,qe(n._id,k);case 8:r=e.sent,V.b.success("Cita realizada en fecha ".concat(r.fecha.toString()," ahora tiene adjunto"));case 10:le.length>0?(s(c.map((function(e){var t;return e._id===D._id?Object(E.a)(Object(E.a)({},e),{},{citas:null===(t=e.citas)||void 0===t?void 0:t.map((function(e){return e._id===le?Object(E.a)(Object(E.a)({},e),{},{anamnesis:a.anamnesis,fecha:a.fecha}):e}))}):e}))),j(b.map((function(e){return e._id===le?Object(E.a)(Object(E.a)({},e),{},{anamnesis:a.anamnesis,fecha:a.fecha,medicamento:t.medicamento,peso:t.peso,presionalterial:t.presionalterial,estatura:t.estatura,temperatura:t.temperatura,imc:t.imc,pulso:t.pulso,hemo:t.hemo,fechaproximaatencion:new Date(t.fechaproximaatencion.toISOString().substr(0,10)),img:r.img}):e})))):(s(c.map((function(e){return e._id===D._id?Object(E.a)(Object(E.a)({},e),{},{citas:[].concat(Object(A.a)(e.citas),[n])}):e}))),j([].concat(Object(A.a)(b),[r]))),V.b.success("Se almacen\xf3 correctamente la cita"),ee(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={_id:D._id,rut:t.rut,nombre:t.nombre,direccion:t.direccion,telefono:t.telefono,fechanacimiento:new Date(t.fechanacimiento.toISOString().substr(0,10)),previsionsalud:t.previsionsalud,otrosdatos:t.otrosdatos,alergia:t.alergia,sexo:t.sexo,email:t.email,nacionalidad:t.nacionalidad,estadocivil:t.estadocivil},F(a),e.next=4,Ve(a);case 4:if(n=e.sent,r=Object(E.a)({},n),!O){e.next=11;break}return e.next=9,He(n._id,O);case 9:r=e.sent,V.b.success(" ".concat(r.nombre," ahora tiene nueva foto"));case 11:a._id.length>0?s(c.map((function(e){return e._id===a._id?Object(E.a)(Object(E.a)({},e),{},{nombre:t.nombre,direccion:t.direccion,telefono:t.telefono,otrosdatos:t.otrosdatos,alergia:t.alergia,rut:t.rut,fechanacimiento:new Date(t.fechanacimiento.toISOString().substr(0,10)),previsionsalud:t.previsionsalud,sexo:t.sexo,nacionalidad:t.nacionalidad,email:t.email,estadocivil:t.estadocivil,img:r.img}):e}))):s([].concat(Object(A.a)(c),[Object(E.a)({},r)])),V.b.success("Se almacen\xf3 correctamente el paciente"),J(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=[{title:"Fecha",dataIndex:"fecha",key:"fecha",width:"10%",render:function(e){return"string"===typeof e?e.substr(0,16).replace("T"," "):ye()(e).format("YYYY-MM-DD hh:mm")}},{title:"Usuario doctor",dataIndex:["usuario","nombre"],key:"usuario",width:"10%"},{title:"Anamnesis",dataIndex:"anamnesis",key:"anamnesis",width:"50%"},{title:"Acciones",key:"acciones",width:"10%",fixed:"right",render:function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(K.a,{}),onClick:function(){C(void 0),r.resetFields(),ue(e._id),L(e),ee(!0),r.setFieldsValue({estatura:e.estatura,peso:e.peso,temperatura:e.temperatura,presionalterial:e.presionalterial,imc:e.imc,pulso:e.pulso,hemo:e.hemo,fecha:ye()(new Date(e.fecha),"YYYY-MM-DD hh:mm:ss a"),anamnesis:e.anamnesis,diagnostico:e.diagnostico,tratamiento:e.tratamiento,medicamento:e.medicamento,saturacion:e.saturacion,motivo:e.motivo,fechaproximaatencion:ye()(new Date(e.fechaproximaatencion),"YYYY-MM-DD hh:mm:ss a")})}}),Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(Le.a,{}),onClick:function(){Ae(e._id).then((function(t){Ee(e._id)}))}}),Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(Te.a,{}),onClick:function(){Ae(e._id).then((function(t){je("".concat(m.defaults.baseURL.replace("api",""),"uploads/consultas/").concat(e._id,".pdf")),ce(!0)}))}})]})}}],Oe=[Object(E.a)(Object(E.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",width:"20%",render:function(e){return e}},Z()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),Object(E.a)(Object(E.a)({title:"Nro. Identificaci\xf3n",dataIndex:"rut",key:"rut",width:"20%",render:function(e){return e}},Z()),{},{onFilter:function(e,t){return t.rut.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.rut.length-t.rut.length}}),{title:"Usuario",dataIndex:["usuario","nombre"],key:"usuario",width:"10%"},{title:"Acciones",key:"acciones",width:"10%",fixed:"right",render:function(e){return Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(K.a,{}),onClick:function(){console.log(e.fechanacimiento),J(!0),F(e),x(void 0),t.resetFields(),j(e.citas),t.setFieldsValue({nosenada:"prueba",rut:e.rut,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,email:e.email,sexo:e.sexo,nacionalidad:e.nacionalidad,alergia:e.alergia,previsionsalud:e.previsionsalud,otrosdatos:e.otrosdatos,fechanacimiento:ye()(new Date(e.fechanacimiento),"YYYY-MM-DD"),edad:ye()(new Date).year()-ye()(new Date(e.fechanacimiento),"YYYY-MM-DD").year(),estadocivil:e.estadocivil})}})}}];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(B.a,{}),size:"large",onClick:function(){x(void 0),t.resetFields(),J(!0),F({_id:"",rut:"",nombre:"",direccion:"",telefono:"",alergia:"",citas:[],fechanacimiento:new Date,sexo:"",nacionalidad:"",email:"",previsionsalud:"",otrosdatos:"",estadocivil:""}),j([]),t.setFieldsValue({nosenada:"prueba",rut:"",nombre:"",direccion:"",telefono:"",alergia:"",citas:[],fechanacimiento:ye()(new Date,"YYYY-MM-DD"),sexo:"",nacionalidad:"",email:"",previsionsalud:"",otrosdatos:"",estadocivil:""})}})})}),Object(p.jsx)(H.a,{orientation:"left",children:"Pacientes"}),Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(q.a,{tableLayout:"fixed",loading:d,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:c,columns:Oe})}),Object(p.jsx)(N.a,{title:"Datos del Paciente",width:720,height:650,onClose:function(){J(!1)},visible:W,bodyStyle:{paddingBottom:60},placement:"bottom",children:Object(p.jsxs)(R.a,{children:[Object(p.jsx)(U.a,{xs:2,sm:4,md:6,lg:8,xl:12,children:Object(p.jsxs)(g.a,{form:t,name:"formpaciente",labelCol:{span:6},wrapperCol:{span:16},size:"small",initialValues:{remember:!0},onFinish:fe,onFinishFailed:function(){},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"Foto",name:"foto",children:Object(p.jsx)(_e.a,{listType:"picture",maxCount:1,showUploadList:!0,beforeUpload:function(e){x(e)},children:Object(p.jsx)(y.a,{icon:Object(p.jsx)(Fe.a,{}),children:"Subir (Max: 1)"})})}),D.img&&Object(p.jsx)(g.a.Item,{children:Object(p.jsx)(De.a,{width:200,src:Re(D.img)})}),Object(p.jsxs)(g.a.Item,{style:{marginBottom:0},label:"Nro. Identificaci\xf3n",name:"nosenada",rules:[{required:!0,message:"Datos no ingresados"}],children:[Object(p.jsx)(g.a.Item,{name:"rut",rules:[{required:!0,message:"Por favor ingrese el RUT"}],style:{width:"calc(50% - 12px)",display:"inline-block"},children:Object(p.jsx)(v.a,{style:{width:"90%"},placeholder:"RUT:(Ej. 12345678-9)"})}),Object(p.jsx)("span",{style:{display:"inline-block",width:"200px",lineHeight:"32px",textAlign:"left"},children:"(DNI, RUN, RUT, CI, PAS, etc.)"})]}),Object(p.jsx)(g.a.Item,{label:"Nombre Completo",name:"nombre",rules:[{required:!0,message:"Por favor ingrese el Nombre"}],children:Object(p.jsx)(v.a,{style:{width:"70%",textTransform:"uppercase"},placeholder:"ESCRIBIR APELLIDOS LUEGO NOMBRES"})}),Object(p.jsx)(g.a.Item,{label:"Fecha de Nacimiento",name:"fechanacimiento",rules:[{required:!0,message:"Por favor ingrese fecha de nacimiento"}],children:Object(p.jsx)(ne.a,{onChange:function(e){var a,n=(new Date).getFullYear()-(null!==(a=null===e||void 0===e?void 0:e.year())&&void 0!==a?a:0);t.setFieldsValue({edad:n})}})}),Object(p.jsx)(g.a.Item,{label:"Edad",name:"edad",children:Object(p.jsx)(re.a,{})}),Object(p.jsx)(g.a.Item,{label:"G\xe9nero",name:"sexo",rules:[{required:!0,message:"Por favor ingrese el sexo del paciente"}],children:Object(p.jsx)(v.a,{style:{width:"20%",textTransform:"capitalize"}})}),Object(p.jsx)(g.a.Item,{label:"Estado Civil",name:"estadocivil",children:Object(p.jsx)(v.a,{style:{width:"20%",textTransform:"capitalize"}})}),Object(p.jsx)(g.a.Item,{label:"Previsi\xf3n de Salud",name:"previsionsalud",children:Object(p.jsx)(Je,{style:{width:"80%",textTransform:"uppercase"}})}),Object(p.jsx)(g.a.Item,{label:"e-mail",name:"email",rules:[{required:!0,message:"Por favor ingrese el correo electr\xf3nico"},{type:"email",message:"Debe ser un correo electr\xf3nico v\xe1lido"}],children:Object(p.jsx)(v.a,{style:{width:"40%"}})}),Object(p.jsx)(g.a.Item,{label:"Direcci\xf3n",name:"direccion",rules:[{required:!0,message:"Por favor ingrese la direcci\xf3n"}],children:Object(p.jsx)(Je,{style:{width:"80%"}})}),Object(p.jsx)(g.a.Item,{label:"Tel\xe9fonos",name:"telefono",rules:[{required:!0,message:"Por favor ingrese tel\xe9fono"}],children:Object(p.jsx)(Je,{style:{width:"50%"}})}),Object(p.jsx)(g.a.Item,{label:"Nacionalidad",name:"nacionalidad",children:Object(p.jsx)(v.a,{style:{width:"50%",textTransform:"capitalize"}})}),Object(p.jsx)(g.a.Item,{label:"Alergias",name:"alergia",children:Object(p.jsx)(Je,{style:{width:"80%",textTransform:"uppercase",color:"red"}})}),Object(p.jsx)(g.a.Item,{label:"Otros Datos",name:"otrosdatos",children:Object(p.jsx)(Je,{style:{width:"80%",textTransform:"uppercase"}})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(y.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(G.a,{}),children:"Guardar"})})]})}),Object(p.jsxs)(U.a,{xs:2,sm:4,md:6,lg:8,xl:10,children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(y.a,{type:"primary",shape:"circle",disabled:0===D._id.length,icon:Object(p.jsx)(B.a,{}),size:"large",onClick:function(){C(void 0),r.resetFields(),ue(""),ee(!0),L({_id:"",anamnesis:"",diagnostico:"",estatura:"",fechaproximaatencion:new Date,imc:"",medicamento:"",peso:"",presionalterial:"",pulso:"",temperatura:"",tratamiento:"",fecha:new Date,hemo:"",img:void 0,motivo:"",saturacion:""}),r.setFieldsValue({estatura:"",peso:"",temperatura:"",presionalterial:"",imc:"",pulso:"",hemo:"",fecha:ye()(new Date,"YYYY-MM-DD"),anamnesis:"",diagnostico:"",tratamiento:"",medicamento:"",fechaproximaatencion:ye()(new Date,"YYYY-MM-DD")})}})})}),Object(p.jsx)(H.a,{orientation:"left",children:"Consultas"}),Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(q.a,{tableLayout:"fixed",size:"small",loading:d,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:b,columns:he})})]})]})}),Object(p.jsx)(We,{paciente:D,citaactual:P,cita:$,setcita:ee,FormaCita:r,onFinishCita:pe,cambiarAdjuntoBefore:function(e){C(e)}}),Object(p.jsx)(N.a,{title:"Reporte",width:720,height:650,onClose:function(){ce(!1)},visible:ie,bodyStyle:{paddingBottom:60},placement:"bottom",children:Object(p.jsx)(Be.a,{file:be,onLoadSuccess:function(){},children:Object(p.jsx)(Be.b,{pageNumber:1})})})]})},Xe=a(93);a(315);Xe.c.register(Xe.b,Xe.e,Xe.a,Xe.f,Xe.g,Xe.d);var Ze=["Enero","Febrero","Marzo","Abril"],$e=(Ze.map((function(){return 800})),Ze.map((function(){return 700})),function(){return Object(p.jsx)(p.Fragment,{})}),et=a(92),tt=(a(316),{allDay:"Todo el d\xeda",previous:"<",next:">",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango",showMore:function(e){return"+ Ver m\xe1s (".concat(e,")")}}),at=function(e){var t=e.event,a=t.title,n=t.name;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("span",{children:[" ",a," "]}),Object(p.jsxs)("strong",{children:[" ",n," "]})]})},nt=a(345),rt=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/citasprevias");case 2:return t=e.sent,e.abrupt("return",t.data.citasprevias);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token")||"",!(t._id.length>0)){e.next=7;break}return e.next=4,m.put("/citasprevias/".concat(t._id),t,{headers:{"x-token":a}});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,m.post("/citasprevias",t,{headers:{"x-token":a}});case 9:n=e.sent;case 10:return e.abrupt("return",n.data);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=v.a.TextArea,ot=ee.a.Option,st=Object(et.c)(ye.a);ye.a.locale("es");var lt=function(e){switch(e.toUpperCase()){case"WEEK":return et.b.WEEK;case"MONTH":return et.b.MONTH;case"AGENDA":return et.b.AGENDA;case"WORK_WEEK":return et.b.WORK_WEEK;default:return et.b.DAY}},ut=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],r=t[1],i=g.a.useForm(),c=Object(o.a)(i,1)[0],s=g.a.useForm(),d=Object(o.a)(s,1)[0],m=Object(n.useState)(!1),b=Object(o.a)(m,2),j=b[0],f=b[1],h=Object(n.useState)(!1),O=Object(o.a)(h,2),x=O[0],w=O[1],S=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),s=c[0],l=c[1];return Object(n.useEffect)((function(){rt().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,citasprevias:s,setCitasprevias:l}}(),k=S.citasprevias,C=S.setCitasprevias,I=Object(n.useState)({_id:"",imc:"",anamnesis:"",diagnostico:"",estatura:"",fecha:new Date,fechaproximaatencion:new Date,medicamento:"",motivo:"",peso:"",presionalterial:"",pulso:"",saturacion:"",temperatura:"",tratamiento:"",hemo:""}),_=Object(o.a)(I,1)[0],D=Object(n.useState)({_id:"",alergia:"",email:"",fechanacimiento:new Date,nacionalidad:"",nombre:"",otrosdatos:"",previsionsalud:"",rut:"",sexo:"",direccion:"",telefono:""}),F=Object(o.a)(D,2),Y=F[0],M=F[1],P=Object(n.useState)({_id:"",desde:new Date,hasta:new Date,motivo:"",paciente:Y}),L=Object(o.a)(P,2),T=L[0],z=L[1],H=Object(n.useState)([]),q=Object(o.a)(H,2),K=q[0],W=q[1];Object(n.useEffect)((function(){if(k&&k.length>0){var e=[];k.map((function(t){return e.push({title:t.motivo,start:t.desde,end:t.hasta,bgcolor:"#fafafa",name:t.paciente.nombre,id:t._id}),!0})),W(e)}}),[k]);var J=Object(n.useState)(localStorage.getItem("lastview")||"MONTH"),Q=Object(o.a)(J,2),X=Q[0],Z=Q[1],$=Ke().pacientes,te=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:it(Object(E.a)(Object(E.a)({},t),{},{_id:t.id,desde:new Date(t.desde.toDate().toISOString()),hasta:new Date(t.hasta.toDate().toISOString())})).then((function(e){W([].concat(Object(A.a)(K),[{title:e.motivo,start:e.desde,end:e.hasta,bgcolor:"#fafafa",name:e.paciente.nombre,id:e._id}])),0===t.id.length?C([].concat(Object(A.a)(k),[e])):C(k.map((function(e){return e._id===t.id?Object(E.a)(Object(E.a)({},e),{},{motivo:t.motivo,desde:t.desde.toDate(),hasta:t.hasta.toDate()}):e}))),V.b.success("Se almacen\xf3 correctamente la cita previa"),f(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={_id:T.cita?T.cita._id:"",peso:t.peso,estatura:t.estatura,temperatura:t.temperatura,presionalterial:t.presionalterial,imc:t.imc,pulso:t.pulso,hemo:t.hemo,fecha:new Date(t.fecha.toDate().toISOString()),anamnesis:t.anamnesis,diagnostico:t.diagnostico,tratamiento:t.tratamiento,medicamento:t.medicamento,motivo:t.motivo,saturacion:t.saturacion,fechaproximaatencion:new Date(t.fechaproximaatencion.toISOString())},e.next=3,Ne(Object(E.a)({},n),Y._id);case 3:if(r=e.sent,i=Object(E.a)({},r),!a){e.next=10;break}return e.next=8,qe(r._id,a);case 8:i=e.sent,V.b.success("Consulta realizada en fecha ".concat(i.fecha.toString()," ahora tiene adjunto"));case 10:return o={_id:c.getFieldValue("id"),cita:i._id,desde:c.getFieldValue("desde").toDate(),hasta:c.getFieldValue("hasta").toDate(),motivo:c.getFieldValue("motivo"),paciente:c.getFieldValue("paciente")},e.next=13,it(o);case 13:V.b.success("Se almacen\xf3 correctamente la consulta"),w(!1),C(k.map((function(e){return e._id===c.getFieldValue("id")?Object(E.a)(Object(E.a)({},e),{},{cita:i}):e}))),console.log(k);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"calendar-screen",children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(y.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(B.a,{}),size:"large",onClick:function(){f(!0),c.setFieldsValue({id:"",motivo:"",paciente:"",desde:ye()(new Date,"YYYY-MM-DD"),hasta:ye()(new Date,"YYYY-MM-DD")})}})})}),Object(p.jsx)(et.a,{localizer:st,events:K,startAccessor:"start",endAccessor:"end",messages:tt,eventPropGetter:function(e,t,a,n){return{style:{backgroundColor:"yellow",borderRadius:"0px",opacity:.8,display:"block",color:"red"}}},onDoubleClickEvent:function(e){console.log(e)},onSelectEvent:function(e){var t=k.find((function(t){return t._id===e.id}));f(!0),c.setFieldsValue({id:null===t||void 0===t?void 0:t._id,motivo:null===t||void 0===t?void 0:t.motivo,paciente:null===t||void 0===t?void 0:t.paciente._id,desde:ye()(new Date(null===t||void 0===t?void 0:t.desde),"YYYY-MM-DD hh:mm:ss a"),hasta:ye()(new Date(null===t||void 0===t?void 0:t.hasta),"YYYY-MM-DD hh:mm:ss a")}),M({_id:(null===t||void 0===t?void 0:t.paciente._id)||"",alergia:"",email:"",fechanacimiento:new Date,nacionalidad:"",nombre:"",otrosdatos:"",previsionsalud:"",rut:"",sexo:"",direccion:"",telefono:""}),z(t)},onView:function(e){Z(e),localStorage.setItem("lastView",e)},view:lt(X),components:{event:at}})]}),Object(p.jsx)(N.a,{title:"Cita",width:720,height:500,onClose:function(){f(!1)},visible:j,bodyStyle:{paddingBottom:60},placement:"bottom",children:Object(p.jsxs)(g.a,{form:c,name:"formcita",labelCol:{span:2},wrapperCol:{span:16},size:"small",initialValues:{remember:!0},onFinish:te,onFinishFailed:function(){},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"Paciente",name:"paciente",children:Object(p.jsx)(ee.a,{showSearch:!0,style:{width:400},placeholder:"Selecciona un paciente",optionFilterProp:"children",onChange:function(){},onSearch:function(){},filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},children:$.map((function(e){var t=e._id,a=e.nombre;return Object(p.jsx)(ot,{value:t,children:a},t)}))})}),Object(p.jsx)(g.a.Item,{label:"Desde",name:"desde",children:Object(p.jsx)(ne.a,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",onChange:function(e){e&&c.setFieldsValue({hasta:e.clone().add(30,"minutes")})}})}),Object(p.jsx)(g.a.Item,{label:"Hasta",name:"hasta",children:Object(p.jsx)(ne.a,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm"})}),Object(p.jsx)(g.a.Item,{label:"Motivo",name:"motivo",rules:[{required:!0,message:"Por favor ingrese motivo de consulta"}],children:Object(p.jsx)(ct,{})}),Object(p.jsx)(g.a.Item,{label:"ID",name:"id",hidden:!0,children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"cita",name:"idcita",hidden:!0,children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(y.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(G.a,{}),disabled:!!T.cita,children:"Guardar cita"})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(y.a,{type:"primary",htmlType:"button",icon:Object(p.jsx)(nt.a,{}),onClick:function(){w(!0),T.cita?d.setFieldsValue({fecha:ye()(new Date(T.cita.fecha),"YYYY-MM-DD hh:mm:ss a"),fechaproximaatencion:ye()(new Date(T.cita.fechaproximaatencion),"YYYY-MM-DD hh:mm:ss a"),motivo:T.cita.motivo,anamnesis:T.cita.anamnesis,presionalterial:T.cita.presionalterial,pulso:T.cita.presionalterial,estatura:T.cita.estatura,peso:T.cita.peso,imc:T.cita.imc,temperatura:T.cita.temperatura,hemo:T.cita.hemo,medicamento:T.cita.medicamento,diagnostico:T.cita.diagnostico,tratamiento:T.cita.tratamiento,saturacion:T.cita.saturacion}):d.setFieldsValue({fecha:ye()(new Date,"YYYY-MM-DD"),fechaproximaatencion:ye()(new Date,"YYYY-MM-DD"),motivo:"",anamnesis:"",presionalterial:"",pulso:"",estatura:"",peso:"",imc:"",temperatura:"",hemo:"",medicamento:"",diagnostico:"",tratamiento:"",saturacion:""})},children:T.cita?"Mostrar consulta":"Generar consulta"})})]})}),Object(p.jsx)(We,{paciente:Y,citaactual:_,cita:x,setcita:w,FormaCita:d,onFinishCita:ae,cambiarAdjuntoBefore:function(e){r(e)}})]})},dt=C.a.Header,mt=C.a.Content,bt=C.a.Footer,jt=C.a.Sider,pt=I.a.SubMenu,ft=function(){return Object(p.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:Object(p.jsx)("path",{d:"M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"})})},ht=function(e){return Object(p.jsx)(k.a,{component:ft,style:{color:"hotpink"}})},Ot=function(){var e,t=function(e){switch(e){case"UserOutlined":return Object(p.jsx)(D.a,{});case"DollarOutlined":return Object(p.jsx)(F.a,{});case"BarcodeOutlined":return Object(p.jsx)(Y.a,{});case"ShoppingCartOutlined":return Object(p.jsx)(M.a,{});case"MedicineBoxOutlined":return Object(p.jsx)(P.a,{});case"HomeOutlined":return Object(p.jsx)(L.a,{});default:return Object(p.jsx)(T.a,{})}},a=Object(n.useContext)(f),r=a.logout,i=a.auth;Object(n.useEffect)((function(){console.log(i)}),[i]);var c=Object(n.useState)(!1),s=Object(o.a)(c,2),l=s[0],u=s[1];return Object(p.jsx)(_.a,{children:Object(p.jsxs)(C.a,{style:{minHeight:"100vh"},children:[Object(p.jsxs)(jt,{collapsible:!0,collapsed:l,onCollapse:function(e){u(e)},children:[Object(p.jsx)("div",{className:"logo"}),Object(p.jsxs)(I.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[null===(e=i.opciones)||void 0===e?void 0:e.map((function(e){var a;return 1===e.clave.split("_").length&&Object(p.jsx)(pt,{icon:t(e.ruta),title:e.titulo,children:null===(a=i.opciones)||void 0===a?void 0:a.filter((function(t){return t.clave.startsWith(e.clave+"_")})).map((function(e){var a;return 2===e.clave.split("_").length?e.ruta.includes("/")?Object(p.jsx)(I.a.Item,{children:Object(p.jsx)(_.b,{to:e.ruta,children:e.titulo})},e.clave):Object(p.jsx)(pt,{icon:t(e.ruta),title:e.titulo,children:null===(a=i.opciones)||void 0===a?void 0:a.filter((function(t){return t.clave.startsWith(e.clave+"_")})).map((function(e){return Object(p.jsx)(I.a.Item,{children:Object(p.jsx)(_.b,{to:e.ruta,children:e.titulo})},e.clave)}))},e.clave):Object(p.jsx)("h1",{children:"ok"})}))},e.clave)})),Object(p.jsx)(pt,{icon:Object(p.jsx)(z.a,{}),title:"Configurar",children:Object(p.jsx)(I.a.Item,{onClick:function(){r()},icon:Object(p.jsx)(ht,{}),children:"Salir de la App "},"11")},"sub3")]})]}),Object(p.jsxs)(C.a,{className:"site-layout",children:[Object(p.jsx)(dt,{className:"site-layout-background",style:{padding:0}}),Object(p.jsx)(mt,{style:{margin:"16px 16px"},children:Object(p.jsxs)(x.d,{children:[Object(p.jsx)(x.b,{exact:!0,path:"/app/home",component:$e}),Object(p.jsx)(x.b,{exact:!0,path:"/app/categorias",component:$}),Object(p.jsx)(x.b,{exact:!0,path:"/app/productos",component:Me}),Object(p.jsx)(x.b,{exact:!0,path:"/app/clientes",component:Pe}),Object(p.jsx)(x.b,{exact:!0,path:"/app/movimientos",component:Ce}),Object(p.jsx)(x.b,{exact:!0,path:"/app/pacientes",component:Qe}),Object(p.jsx)(x.b,{exact:!0,path:"/app/calendario",component:ut}),Object(p.jsx)(x.a,{to:"/app/home"})]})}),Object(p.jsx)(bt,{style:{textAlign:"center"},children:"Software Manta \xa92018 Created by ManTalents"})]})]})})},xt={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},gt={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},vt=function(){var e=g.a.useForm(),t=Object(o.a)(e,1)[0];return Object(p.jsxs)(g.a,Object(E.a)(Object(E.a)({},xt),{},{form:t,name:"register",onFinish:function(e){console.log("Received values of form: ",e)},initialValues:{residence:["zhejiang","hangzhou","xihu"],prefix:"86"},scrollToFirstError:!0,children:[Object(p.jsx)(g.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(p.jsx)(v.a.Password,{})}),Object(p.jsx)(g.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}}],children:Object(p.jsx)(v.a.Password,{})}),Object(p.jsx)(g.a.Item,{name:"nickname",label:"Nickname",tooltip:"What do you want others to call you?",rules:[{required:!0,message:"Please input your nickname!",whitespace:!0}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,Object(E.a)(Object(E.a)({},gt),{},{children:Object(p.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Register"})}))]}))},wt=a(145),yt=["component","isAuthenticated"],St=function(e){var t=e.component,a=e.isAuthenticated,n=Object(wt.a)(e,yt);return Object(p.jsx)(x.b,Object(E.a)(Object(E.a)({},n),{},{render:function(e){return a?Object(p.jsx)(x.a,{to:"/app"}):Object(p.jsx)(t,Object(E.a)({},e))}}))},kt=["component","isAuthenticated"],Ct=function(e){var t=e.component,a=e.isAuthenticated,n=Object(wt.a)(e,kt);return Object(p.jsx)(x.b,Object(E.a)(Object(E.a)({},n),{},{render:function(e){return a?Object(p.jsx)(t,Object(E.a)({},e)):Object(p.jsx)(x.a,{to:"/auth"})}}))},It=function(){var e=Object(n.useContext)(f),t=e.auth,a=e.verificaToken;return Object(n.useEffect)((function(){a()}),[a]),Object(p.jsx)(_.a,{children:Object(p.jsxs)(x.d,{children:[Object(p.jsx)(Ct,{isAuthenticated:t.logged,path:"/app",component:Ot}),Object(p.jsx)(St,{isAuthenticated:t.logged,exact:!0,path:"/auth/login",component:S}),Object(p.jsx)(St,{isAuthenticated:t.logged,exact:!0,path:"/auth/register",component:vt}),Object(p.jsx)(x.a,{to:"/auth/login"})]})})};c.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(O,{children:Object(p.jsx)(It,{})})}),document.getElementById("root"))}},[[318,1,2]]]);
//# sourceMappingURL=main.7d3da836.chunk.js.map