(this.webpackJsonpmantalents=this.webpackJsonpmantalents||[]).push([[0],{215:function(e,t,a){},292:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(43),o=a.n(c),i=a(19),s=a(18),l=a.n(s),u=a(25),d=a(173),b=a.n(d).a.create({baseURL:"http://167.71.26.102:80/api"}),j=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.post("/auth/login",{correo:t,password:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token")||"",e.next=3,b.get("/auth",{headers:{"x-token":t}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=a(4),f=Object(n.createContext)({auth:{uid:"",checking:!0,logged:!0,name:"",email:"",opciones:[{_id:"",clave:"",ruta:"",titulo:""}]},login:function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),verificaToken:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){return!0}}),h={uid:"",checking:!0,logged:!1,name:"",email:"",opciones:[{_id:"",clave:"",ruta:"",titulo:""}]},O=function(e){var t=e.children,a=Object(n.useState)(h),r=Object(i.a)(a,2),c=r[0],o=r[1],s=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t,a);case 2:return(n=e.sent).usuario&&(localStorage.setItem("token",n.token),r=n.usuario,o({uid:r.uid,checking:!1,logged:!0,name:r.nombre,email:r.correo,opciones:r.opciones})),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),d=Object(n.useCallback)(Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=4;break}return o({uid:void 0,checking:!1,logged:!1,name:void 0,email:void 0,opciones:[]}),e.abrupt("return",!1);case 4:return e.next=6,m();case 6:if(!(t=e.sent)){e.next=14;break}return localStorage.setItem("token",t.token),a=t.usuario,o({uid:a.uid,checking:!1,logged:!0,name:a.nombre,email:a.correo,opciones:a.opciones}),e.abrupt("return",!0);case 14:return o({uid:void 0,checking:!1,logged:!1,name:void 0,email:void 0}),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)}))),[]);return Object(p.jsx)(f.Provider,{value:{auth:c,login:s,verificaToken:d,logout:function(){return localStorage.removeItem("token"),o({checking:!1,logged:!1}),!0}},children:t})},x=(a(215),a(32)),g=a(303),v=a(305),y=a(115),w=a(49),k=function(){var e=Object(n.useContext)(f).login,t=function(){var t=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(a.username,a.password);case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsxs)(g.a,{name:"basic",labelCol:{span:6},wrapperCol:{span:8},initialValues:{remember:!0},onFinish:t,onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(p.jsx)(v.a.Password,{})}),Object(p.jsx)(g.a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:Object(p.jsx)(y.a,{children:"Remember me"})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(w.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})},C=a(298),S=a(297),I=a(90),_=a(63),F=a(316),P=a(317),D=a(318),L=a(319),Y=a(320),M=a(321),z=a(322),q=a(323),T=a(29),V=a(12),A=a(186),R=a(294),U=a(295),E=a(296),K=a(299),B=a(307),N=a(309),G=a(310),J=a(311),H=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/categorias");case 2:return t=e.sent,e.abrupt("return",t.data.categorias);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token")||"",!(t._id.length>0)){e.next=7;break}return e.next=4,b.put("/categorias/".concat(t._id),t,{headers:{"x-token":a}});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,b.post("/categorias",t,{headers:{"x-token":a}});case 9:n=e.sent;case 10:return e.abrupt("return",n.data);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),o=Object(i.a)(c,2),s=o[0],l=o[1];return Object(n.useEffect)((function(){H().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,categorias:s,setCategorias:l}},X=a(137);function Z(){var e={current:null};return{filterDropdown:function(t){var a=t.setSelectedKeys,n=t.selectedKeys,r=t.confirm,c=t.clearFilters;return Object(p.jsxs)("div",{style:{padding:8},children:[Object(p.jsx)(v.a,{ref:function(t){return e.current=t},placeholder:"Search",value:n[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return r},style:{width:188,marginBottom:8,display:"block"}}),Object(p.jsx)(w.a,{type:"primary",onClick:function(){return r()},icon:Object(p.jsx)(X.a,{}),size:"small",style:{width:90,marginRight:8},children:"Buscar"}),Object(p.jsx)(w.a,{size:"small",style:{width:90},onClick:c,children:"Resetear"})]})},filterIcon:function(e){return Object(p.jsx)(X.a,{style:{color:e?"#1890ff":void 0}})},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){var t;return null===(t=e.current)||void 0===t?void 0:t.select()}))}}}var $=function(){var e=g.a.useForm(),t=Object(i.a)(e,1)[0],a=[Object(V.a)(Object(V.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",render:function(e){return e}},Z()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),{title:"Usuario",dataIndex:["usuario","nombre"],key:"usuario"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(N.a,{}),onClick:function(){h(!0),b(e),t.setFieldsValue({nombre:e.nombre})}})}}],r=Q(),c=r.categorias,o=r.setCategorias,s=r.isLoading,l=Object(n.useState)({_id:"",nombre:""}),u=Object(i.a)(l,2),d=u[0],b=u[1],j=Object(n.useState)(!1),m=Object(i.a)(j,2),f=m[0],h=m[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(G.a,{}),size:"large",onClick:function(){h(!0),b({_id:"",nombre:""}),t.setFieldsValue({nombre:""})}})})}),Object(p.jsx)(E.a,{orientation:"left",children:"Categorias/Grupos"}),Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(K.a,{tableLayout:"fixed",loading:s,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:c,columns:a})}),Object(p.jsx)(B.a,{title:"Categor\xeda",width:720,height:300,onClose:function(){h(!1)},visible:f,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(p.jsxs)(g.a,{form:t,name:"formcategoria",labelCol:{span:4},wrapperCol:{span:12},initialValues:{remember:!0},onFinish:function(e){b({_id:d._id,nombre:e.nombre}),W(Object(V.a)(Object(V.a)({},e),{},{_id:d._id})).then((function(t){d._id.length>0?o(c.map((function(t){return t._id===d._id?Object(V.a)(Object(V.a)({},t),{},{nombre:e.nombre}):t}))):o([].concat(Object(T.a)(c),[t])),A.b.success("Se almacen\xf3 correctamente la categor\xeda"),h(!1)})).catch((function(e){A.b.error("Se presentaron errores al intentar almacenar las categorias")}))},onFinishFailed:function(){},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"Descripci\xf3n",name:"nombre",rules:[{required:!0,message:"Por favor ingrese la descripci\xf3n"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(w.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(J.a,{}),children:"Guardar"})})]})})]})},ee=a(114),te=a(308),ae=a(178),ne=a(300),re=a(304),ce=a(312),oe=a(313),ie=a(314),se=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/movimientos");case 2:return t=e.sent,e.abrupt("return",t.data.movimientos);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("movimientos/ultimo");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/movimientos/electronica/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/uploads/facturas/".concat(t),{responseType:"blob"});case 2:a=e.sent,window.open(URL.createObjectURL(a.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("token")||"",!(t.length>0)){e.next=7;break}return e.next=4,b.put("/movimientos/".concat(t),a,{headers:{"x-token":n}});case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,b.post("/movimientos",a,{headers:{"x-token":n}});case 9:r=e.sent;case 10:return e.abrupt("return",r.data);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/personas");case 2:return t=e.sent,e.abrupt("return",t.data.personas);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token")||"",!(t._id.length>0)){e.next=7;break}return e.next=4,b.put("/personas/".concat(t._id),t,{headers:{"x-token":a}});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,b.post("/personas",t,{headers:{"x-token":a}});case 9:n=e.sent;case 10:return e.abrupt("return",n.data);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),o=Object(i.a)(c,2),s=o[0],l=o[1];return Object(n.useEffect)((function(){je().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,personas:s,setPersonas:l}},fe=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/productos");case 2:return(t=e.sent).data.productos.map((function(e){return e.idaux=e._id})),e.abrupt("return",t.data.productos);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(e){var t,a;return"".concat(null===(t=b.defaults.baseURL)||void 0===t?void 0:t.substr(0,null===(a=b.defaults.baseURL)||void 0===a?void 0:a.lastIndexOf("/")),"/uploads/productos/").concat(e)},Oe=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("archivo",a),e.next=4,b.put("/uploads/productos/".concat(t),n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),xe=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token")||"",console.log(t),!(t.id.length>0)){e.next=8;break}return e.next=5,b.put("/productos/".concat(t.id),t,{headers:{"x-token":a}});case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,b.post("/productos",t,{headers:{"x-token":a}});case 10:n=e.sent;case 11:return e.abrupt("return",n.data);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),o=Object(i.a)(c,2),s=o[0],l=o[1];return Object(n.useEffect)((function(){fe().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,productos:s,setProductos:l}},ve=a(180),ye=a(35),we=a.n(ye),ke=function(e){var t=e.Forma,a=e.persona,n=e.setpersona,r=e.personas,c=void 0===r?[]:r,o=e.setPersonas,i=e.formulario,s=e.setformulario;return Object(p.jsx)(B.a,{title:"Crear/Modificar Cliente",width:720,height:400,onClose:function(){s(!1)},visible:i,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(p.jsxs)(g.a,{form:t,name:"formcategoria",labelCol:{span:4},wrapperCol:{span:12},initialValues:{remember:!0},onFinish:function(e){n({_id:a._id,identificacion:e.identificacion,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,correoelectronico:e.correoelectronico}),me(Object(V.a)(Object(V.a)({},e),{},{_id:a._id})).then((function(t){a._id.length>0?o(c.map((function(t){return t._id===a._id?Object(V.a)(Object(V.a)({},t),{},{identificacion:e.identificacion,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,correoelectronico:e.correoelectronico}):t}))):(console.log(t),o([].concat(Object(T.a)(c),[t])),console.log(c)),A.b.success("Se almacen\xf3 correctamente el producto"),s(!1)})).catch((function(e){A.b.error("Se presentaron errores al intentar almacenar los productos")}))},onFinishFailed:function(){},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"Identificaci\xf3n",name:"identificacion",rules:[{required:!0,message:"Por favor ingrese la identificaci\xf3n"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Descripci\xf3n",name:"nombre",rules:[{required:!0,message:"Por favor ingrese la descripci\xf3n"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Direcci\xf3n",name:"direccion",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Tel\xe9fono",name:"telefono",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Correo Electr\xf3nico",name:"correoelectronico",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(w.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(J.a,{}),children:"Guardar"})})]})})},Ce=ee.a.Option,Se=function(){var e=g.a.useForm(),t=Object(i.a)(e,1)[0],a=g.a.useForm(),r=Object(i.a)(a,1)[0],c=Object(n.useState)({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),o=Object(i.a)(c,2),s=o[0],l=o[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),b=d[0],j=d[1],m=Object(n.useState)(!1),f=Object(i.a)(m,2),h=f[0],O=f[1],x=[Object(V.a)(Object(V.a)({title:"C\xf3digo",dataIndex:"codigo",key:"codigo",width:150,render:function(e){return e}},Z()),{},{onFilter:function(e,t){return t.codigo.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.codigo.length-t.codigo.length}}),{title:"Fecha",dataIndex:"fecha",key:"fecha",width:200,render:function(e){return"string"===typeof e?e.substr(0,10):we()(e).format("YYYY-MM-DD")}},{title:"Cliente",dataIndex:["cliente","nombre"],key:"cliente"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(p.jsxs)(te.b,{children:[Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(N.a,{}),onClick:function(){var a,n;W(!0),P(e);var r=[];null===(a=e.productos)||void 0===a||a.forEach((function(e){r.push({item:e.item._id,cantidad:e.cantidad,precio:e.precio,total:e.cantidad*e.precio})})),t.setFieldsValue({codigo:e.codigo,cliente:null===(n=e.cliente)||void 0===n?void 0:n._id,subtotal:e.subtotal,iva:e.iva,descuento:e.descuento,total:e.total,fecha:we()(e.fecha,"YYYY-MM-DD"),productos:r})}}),Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(ce.a,{}),onClick:function(){O(!0),ue(e._id).then((function(e){console.log(e.data[0]);var t="";t=e.data[0].RespuestaRecepcionComprobante?e.data[0].RespuestaRecepcionComprobante.comprobantes.comprobante.mensajes.mensaje.mensaje:e.data[0].RespuestaAutorizacionComprobante.autorizaciones.autorizacion.numeroAutorizacion,O(!1),A.b.success("Se presentaron los siguientes mensajes: ".concat(t," "))})).catch((function(e){console.log(e),O(!1),A.b.error("Se presentaron los siguientes mensajes")}))}}),Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(oe.a,{}),onClick:function(){de(e._id).then((function(e){console.log(e)}))}})]})}}],y=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),o=Object(i.a)(c,2),s=o[0],l=o[1];return Object(n.useEffect)((function(){se().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,movimientos:s,setMovimientos:l}}(),k=y.movimientos,C=y.setMovimientos,S=y.isLoading,I=Object(n.useState)({_id:"",fecha:new Date,iva:0,descuento:0,subtotal:0,total:0,codigo:""}),_=Object(i.a)(I,2),F=_[0],P=_[1],D=pe(),L=D.personas,Y=D.setPersonas,M=ge().productos,z=Object(n.useState)(!1),q=Object(i.a)(z,2),H=q[0],W=q[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(G.a,{}),size:"large",onClick:function(){le().then((function(e){t.setFieldsValue({codigo:parseInt(e.codigo)+1})})),W(!0),P({_id:"",fecha:new Date,codigo:"",subtotal:0,iva:0,total:0,descuento:0}),t.setFieldsValue({cliente:"",subtotal:0,iva:0,descuento:0,total:0,fecha:we()(new Date,"YYYY-MM-DD"),productos:[{item:"",cantidad:1,precio:0}]})}})})}),Object(p.jsx)(E.a,{orientation:"left",children:"Movimientos"}),Object(p.jsx)(ae.a,{spinning:h,delay:500,size:"large",tip:"Procesando...",children:Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(K.a,{tableLayout:"fixed",loading:S,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:k,columns:x},"_id")})}),Object(p.jsx)(B.a,{title:"Movimiento",width:720,height:600,onClose:function(){W(!1)},visible:H,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(p.jsxs)(g.a,{form:t,name:"formmovimiento",initialValues:{remember:!0},onValuesChange:function(e,a){var n=Object(T.a)(a.productos),r=0;a.productos.forEach((function(e,a){e&&e.cantidad&&e.precio&&(e.total=e.cantidad*e.precio,r+=e.total,n.splice(a,1,e),t.setFieldsValue({productos:n}))}));var c=new ve.Decimal(r);t.setFieldsValue({subtotal:c,iva:c.mul(.12),total:c.mul(1.12)})},onFinish:function(e){P({_id:F._id,codigo:e.codigo,fecha:new Date(e.fecha.toISOString().substr(0,10)),subtotal:e.subtotal,iva:e.iva,descuento:e.descuento,total:e.total});var t=[];e.productos.forEach((function(e){t.push({cantidad:e.cantidad,precio:e.precio,item:{_id:e.item,nombre:"",categoria:"",precio:0,estado:!0},_id:""})}));var a=L.filter((function(t){return t._id===e.cliente}))[0];be(F._id,{codigo:e.codigo,fecha:e.fecha.format("YYYY-MM-DD"),cliente:e.cliente,productos:e.productos,subtotal:e.subtotal,iva:e.iva,descuento:e.descuento,total:e.total}).then((function(n){F._id.length>0?C(k.map((function(n){return n._id===F._id?Object(V.a)(Object(V.a)({},n),{},{codigo:e.codigo,fecha:we()(e.fecha,"YYYY-MM-DD").toDate(),cliente:{_id:a._id,nombre:a.nombre,direccion:a.direccion,telefono:a.telefono,identificacion:a.identificacion,correoelectronico:a.correoelectronico,estado:!0},descuento:e.descuento,iva:e.iva,subtotal:e.subtotal,total:e.total,productos:t}):n}))):C([].concat(Object(T.a)(k),[Object(V.a)(Object(V.a)({},n),{},{cliente:{_id:a._id,nombre:a.nombre,direccion:a.direccion,telefono:a.telefono,identificacion:a.identificacion,correoelectronico:a.correoelectronico,estado:!0}})])),A.b.success("Se almacen\xf3 correctamente el movimiento"),W(!1)})).catch((function(e){A.b.error("Se presentaron errores al intentar almacenar los movimientos")}))},onFinishFailed:function(){},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"C\xf3digo",name:"codigo",style:{width:300},rules:[{required:!0,message:"Por favor ingrese el c\xf3digo"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Fecha",name:"fecha",children:Object(p.jsx)(ne.a,{})}),Object(p.jsx)(g.a.Item,{label:"Cliente",name:"cliente",children:Object(p.jsx)(ee.a,{showSearch:!0,style:{width:400},placeholder:"Selecciona una persona",optionFilterProp:"children",onChange:function(){},onSearch:function(){},filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},children:L.map((function(e){var t=e._id,a=e.nombre;return Object(p.jsx)(Ce,{value:t,children:a},t)}))})}),Object(p.jsx)(g.a.Item,{children:Object(p.jsx)(w.a,{type:"dashed",onClick:function(){j(!0),l({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),r.setFieldsValue({identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""})},icon:Object(p.jsx)(G.a,{}),children:"Agregar"})}),Object(p.jsx)(g.a.List,{name:"productos",children:function(e,t){var a=t.add,n=t.remove;return Object(p.jsxs)(p.Fragment,{children:[e.map((function(e){return Object(p.jsxs)(te.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(p.jsx)(g.a.Item,{name:[e.name,"item"],fieldKey:[e.fieldKey,"item"],children:Object(p.jsx)(ee.a,{showSearch:!0,style:{width:400},placeholder:"Seleccione producto",optionFilterProp:"children",onChange:function(){},onSearch:function(){},filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},children:M.map((function(e){var t=e._id,a=e.nombre;return Object(p.jsx)(Ce,{value:t,children:a},t)}))})}),Object(p.jsx)(g.a.Item,Object(V.a)(Object(V.a)({},e),{},{name:[e.name,"cantidad"],fieldKey:[e.fieldKey,"cantidad"],rules:[{required:!0,message:"Debe ubicar el cantidad"}],children:Object(p.jsx)(re.a,{placeholder:"Cantidad"})})),Object(p.jsx)(g.a.Item,Object(V.a)(Object(V.a)({},e),{},{name:[e.name,"precio"],fieldKey:[e.fieldKey,"precio"],rules:[{required:!0,message:"Debe ubicar el precio"}],children:Object(p.jsx)(re.a,{placeholder:"Precio"})})),Object(p.jsx)(g.a.Item,Object(V.a)(Object(V.a)({noStyle:!0},e),{},{name:[e.name,"total"],fieldKey:[e.fieldKey,"total"],children:Object(p.jsx)(v.a,{disabled:!0,placeholder:"Total"})})),Object(p.jsx)(ie.a,{onClick:function(){n(e.name)}})]},e.key)})),Object(p.jsx)(g.a.Item,{children:Object(p.jsx)(w.a,{type:"dashed",onClick:function(){return a()},block:!0,icon:Object(p.jsx)(G.a,{}),children:"Agregar"})})]})}}),Object(p.jsx)(g.a.Item,{label:"Subtotal",name:"subtotal",style:{width:300},children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Iva",name:"iva",style:{width:300},children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Descuento",name:"descuento",style:{width:300},children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Total",name:"total",style:{width:300},children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(w.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(J.a,{}),children:"Guardar"})})]})}),Object(p.jsx)(ke,{Forma:r,persona:s,setpersona:l,personas:L,setPersonas:Y,formulario:b,setformulario:j})]})},Ie=a(306),_e=a(301),Fe=a(302),Pe=a(315),De=ee.a.Option,Le=function(){var e=g.a.useForm(),t=Object(i.a)(e,1)[0],a=[{title:"Foto",key:"foto",render:function(e){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Ie.a,{src:he(e.img||"")},e._id)})}},Object(V.a)(Object(V.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",render:function(e){return e}},Z()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),{title:"Categoria",dataIndex:["categoria","nombre"],key:"categoria"},{title:"Precio",dataIndex:"precio",key:"precio"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(N.a,{}),onClick:function(){I(!0),y(e),t.setFieldsValue({nombre:e.nombre,precio:e.precio,costo:e.costo,minimo:e.minimo,categoria:e.categoria._id})}})}}],r=ge(),c=r.productos,o=r.setProductos,s=r.isLoading,d=Q().categorias,b=Object(n.useState)(),j=Object(i.a)(b,2),m=j[0],f=j[1],h=Object(n.useState)({_id:"",nombre:"",precio:0,categoria:{_id:"",nombre:""}}),O=Object(i.a)(h,2),x=O[0],y=O[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),S=C[0],I=C[1],_=[],F=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y({_id:x._id,nombre:t.nombre,precio:t.precio,costo:t.costo,minimo:t.minimo,categoria:{_id:t.categoria,nombre:""}}),a="",t.categoria&&t.categoria.length>0&&(a=d.filter((function(e){return e._id===t.categoria}))[0].nombre),e.next=5,xe(Object(V.a)(Object(V.a)({},t),{},{categoria:t.categoria,id:x._id}));case 5:return n=e.sent,_=x._id.length>0?c.map((function(e){return e._id===x._id?Object(V.a)(Object(V.a)({},e),{},{nombre:t.nombre,precio:t.precio,costo:t.costo,minimo:t.minimo,idaux:"",img:n.img,categoria:{_id:t.categoria,nombre:a}}):e})):[].concat(Object(T.a)(c),[n]),e.next=9,Oe(n._id,m);case 9:r=e.sent,_=_.map((function(e){return e._id===r._id?Object(V.a)(Object(V.a)({},e),{},{img:r.img}):e})),o(_),A.b.success("Se almacen\xf3 correctamente el producto"),I(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(G.a,{}),size:"large",onClick:function(){I(!0),y({_id:"",nombre:"",precio:0,costo:0,minimo:0,categoria:{_id:"",nombre:""}}),t.setFieldsValue({nombre:"",precio:0,costo:0,minimo:0,categoria:""}),o(c.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{idaux:e._id})})))}})})}),Object(p.jsx)(E.a,{orientation:"left",children:"Productos"}),Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(K.a,{tableLayout:"fixed",loading:s,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:c,columns:a},"_id")}),Object(p.jsx)(B.a,{title:"Items",width:720,height:400,onClose:function(){I(!1)},visible:S,bodyStyle:{paddingBottom:120},placement:"bottom",children:Object(p.jsxs)(g.a,{form:t,name:"formcategoria",labelCol:{span:4},wrapperCol:{span:12},initialValues:{remember:!0},onFinish:F,onFinishFailed:function(){},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"Descripci\xf3n",name:"nombre",rules:[{required:!0,message:"Por favor ingrese la descripci\xf3n"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Costo",name:"costo",children:Object(p.jsx)(re.a,{})}),Object(p.jsx)(g.a.Item,{label:"M\xednimo",name:"minimo",children:Object(p.jsx)(re.a,{})}),Object(p.jsx)(g.a.Item,{label:"Precio",name:"precio",children:Object(p.jsx)(re.a,{min:"0.01"})}),Object(p.jsx)(g.a.Item,{label:"Categoria",name:"categoria",children:Object(p.jsx)(ee.a,{showSearch:!0,style:{width:400},placeholder:"Select a person",optionFilterProp:"children",onChange:function(){},onSearch:function(){},filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},children:d.map((function(e){var t=e._id,a=e.nombre;return Object(p.jsx)(De,{value:t,children:a},t)}))})}),Object(p.jsx)(g.a.Item,{label:"Foto",name:"foto",children:Object(p.jsx)(_e.a,{listType:"picture",maxCount:1,beforeUpload:function(e){f(e)},children:Object(p.jsx)(w.a,{icon:Object(p.jsx)(Pe.a,{}),children:"Subir (Max: 1)"})})}),x.img&&Object(p.jsx)(g.a.Item,{children:Object(p.jsx)(Fe.a,{width:200,src:he(x.img)})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(w.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(J.a,{}),children:"Guardar"})})]})})]})},Ye=function(){var e=g.a.useForm(),t=Object(i.a)(e,1)[0],a=[Object(V.a)(Object(V.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",render:function(e){return e}},Z()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),{title:"Usuario",dataIndex:["usuario","nombre"],key:"usuario"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(N.a,{}),onClick:function(){h(!0),b(e),t.setFieldsValue({identificacion:e.identificacion,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,correoelectronico:e.correoelectronico})}})}}],r=pe(),c=r.isLoading,o=r.personas,s=r.setPersonas,l=Object(n.useState)({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),u=Object(i.a)(l,2),d=u[0],b=u[1],j=Object(n.useState)(!1),m=Object(i.a)(j,2),f=m[0],h=m[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(G.a,{}),size:"large",onClick:function(){h(!0),b({_id:"",identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""}),t.setFieldsValue({identificacion:"",nombre:"",direccion:"",telefono:"",correoelectronico:""})}})})}),Object(p.jsx)(E.a,{orientation:"left",children:"Clientes"}),Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(K.a,{tableLayout:"fixed",loading:c,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:o,columns:a})}),Object(p.jsx)(ke,{Forma:t,persona:d,setpersona:b,personas:o,setPersonas:s,formulario:f,setformulario:h})]})},Me=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/pacientes");case 2:return t=e.sent,e.abrupt("return",t.data.pacientes);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token")||"",e.prev=1,!(t._id.length>0)){e.next=8;break}return e.next=5,b.put("/pacientes/".concat(t._id),t,{headers:{"x-token":a}});case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,b.post("/pacientes",t,{headers:{"x-token":a}});case 10:n=e.sent;case 11:return e.abrupt("return",n.data);case 14:return e.prev=14,e.t0=e.catch(1),console.log(a),console.log(e.t0),e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),qe=function(e){var t,a;return"".concat(null===(t=b.defaults.baseURL)||void 0===t?void 0:t.substr(0,null===(a=b.defaults.baseURL)||void 0===a?void 0:a.lastIndexOf("/")),"/uploads/pacientes/").concat(e)},Te=function(e){var t,a;return"".concat(null===(t=b.defaults.baseURL)||void 0===t?void 0:t.substr(0,null===(a=b.defaults.baseURL)||void 0===a?void 0:a.lastIndexOf("/")),"/uploads/citas/").concat(e)},Ve=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("archivo",a),e.next=4,b.put("/uploads/pacientes/".concat(t),n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("archivo",a),e.next=4,b.put("/uploads/citas/".concat(t),n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Re=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c.length>1&&void 0!==c[1]?c[1]:"",n=localStorage.getItem("token")||"",!(t._id.length>0)){e.next=8;break}return e.next=5,b.put("/citas/".concat(t._id),t,{headers:{"x-token":n}});case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,b.post("/citas/".concat(a),t,{headers:{"x-token":n}});case 10:r=e.sent;case 11:return e.abrupt("return",r.data);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=g.a.useForm(),t=Object(i.a)(e,1)[0],a=g.a.useForm(),r=Object(i.a)(a,1)[0],c=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),o=Object(i.a)(c,2),s=o[0],l=o[1],u=Object(n.useState)([]),d=Object(i.a)(u,2),b=d[0],j=d[1];return Object(n.useEffect)((function(){Me().then((function(e){r(!1),l(e)}))}),[]),{isLoading:a,setIsLoading:r,pacientes:s,setPacientes:l,citas:b,setCitas:j}}(),o=c.pacientes,s=c.setPacientes,d=c.isLoading,b=c.citas,j=c.setCitas,m=Object(n.useState)(),f=Object(i.a)(m,2),h=f[0],O=f[1],x=Object(n.useState)(),y=Object(i.a)(x,2),k=y[0],C=y[1],S=Object(n.useState)({_id:"",nombre:"",rut:"",direccion:"",telefono:"",citas:[],fechanacimiento:new Date,alergia:"",sexo:"",email:"",nacionalidad:"",previsionsalud:"",otrosdatos:""}),I=Object(i.a)(S,2),_=I[0],F=I[1],P=Object(n.useState)({_id:"",anamnesis:"",diagnostico:"",estatura:"",fechaproximaatencion:new Date,imc:"",medicamento:"",peso:"",presionalterial:"",pulso:"",temperatura:"",tratamiento:"",fecha:new Date,hemo:""}),D=Object(i.a)(P,2),L=D[0],Y=D[1],M=Object(n.useState)(!1),z=Object(i.a)(M,2),q=z[0],H=z[1],W=Object(n.useState)(!1),Q=Object(i.a)(W,2),X=Q[0],$=Q[1],ee=Object(n.useState)(""),te=Object(i.a)(ee,2),ae=te[0],re=te[1],ce=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={_id:ae,peso:t.peso,estatura:t.estatura,temperatura:t.temperatura,presionalterial:t.presionalterial,imc:t.imc,pulso:t.pulso,hemo:t.hemo,fecha:new Date(t.fecha.toISOString().substr(0,10)),anamnesis:t.anamnesis,diagnostico:t.diagnostico,tratamiento:t.tratamiento,medicamento:t.medicamento,fechaproximaatencion:new Date(t.fechaproximaatencion.toISOString().substr(0,10))},e.next=3,Re(Object(V.a)({},a),_._id);case 3:if(n=e.sent,r=Object(V.a)({},n),!k){e.next=10;break}return e.next=8,Ae(n._id,k);case 8:r=e.sent,A.b.success("Cita realizada en fecha ".concat(r.fecha.toString()," ahora tiene adjunto"));case 10:ae.length>0?(s(o.map((function(e){var t;return e._id===_._id?Object(V.a)(Object(V.a)({},e),{},{citas:null===(t=e.citas)||void 0===t?void 0:t.map((function(e){return e._id===ae?Object(V.a)(Object(V.a)({},e),{},{anamnesis:a.anamnesis,fecha:a.fecha}):e}))}):e}))),j(b.map((function(e){return e._id===ae?Object(V.a)(Object(V.a)({},e),{},{anamnesis:a.anamnesis,fecha:a.fecha,medicamento:t.medicamento,peso:t.peso,presionalterial:t.presionalterial,estatura:t.estatura,temperatura:t.temperatura,imc:t.imc,pulso:t.pulso,hemo:t.hemo,fechaproximaatencion:new Date(t.fechaproximaatencion.toISOString().substr(0,10)),img:r.img}):e})))):(s(o.map((function(e){return e._id===_._id?Object(V.a)(Object(V.a)({},e),{},{citas:[].concat(Object(T.a)(e.citas),[n])}):e}))),j([].concat(Object(T.a)(b),[r]))),A.b.success("Se almacen\xf3 correctamente la cita"),$(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={_id:_._id,rut:t.rut,nombre:t.nombre,direccion:t.direccion,telefono:t.telefono,fechanacimiento:new Date(t.fechanacimiento.toISOString().substr(0,10)),previsionsalud:t.previsionsalud,otrosdatos:t.otrosdatos,alergia:t.alergia,sexo:t.sexo,email:t.email,nacionalidad:t.nacionalidad},F(a),e.next=4,ze(a);case 4:if(n=e.sent,r=Object(V.a)({},n),!h){e.next=11;break}return e.next=9,Ve(n._id,h);case 9:r=e.sent,A.b.success(" ".concat(r.nombre," ahora tiene nueva foto"));case 11:a._id.length>0?s(o.map((function(e){return e._id===a._id?Object(V.a)(Object(V.a)({},e),{},{nombre:t.nombre,direccion:t.direccion,telefono:t.telefono,otrosdatos:t.otrosdatos,alergia:t.alergia,rut:t.rut,fechanacimiento:new Date(t.fechanacimiento.toISOString().substr(0,10)),previsionsalud:t.previsionsalud,sexo:t.sexo,nacionalidad:t.nacionalidad,email:t.email,img:r.img}):e}))):s([].concat(Object(T.a)(o),[Object(V.a)({},r)])),A.b.success("Se almacen\xf3 correctamente el paciente"),H(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=[{title:"Fecha",dataIndex:"fecha",key:"fecha",render:function(e){return"string"===typeof e?e.substr(0,10):we()(e).format("YYYY-MM-DD")}},{title:"Anamnesis",dataIndex:"anamnesis",key:"anamnesis"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(N.a,{}),onClick:function(){C(void 0),r.resetFields(),re(e._id),Y(e),$(!0),r.setFieldsValue({estatura:e.estatura,peso:e.peso,temperatura:e.temperatura,presionalterial:e.presionalterial,imc:e.imc,pulso:e.pulso,hemo:e.hemo,fecha:we()(e.fecha,"YYYY-MM-DD"),anamnesis:e.anamnesis,diagnostico:e.diagnostico,tratamiento:e.tratamiento,medicamento:e.medicamento,fechaproximaatencion:we()(e.fechaproximaatencion,"YYYY-MM-DD")})}})}}],se=[Object(V.a)(Object(V.a)({title:"Nombre",dataIndex:"nombre",key:"nombre",render:function(e){return e}},Z()),{},{onFilter:function(e,t){return t.nombre.toLowerCase().includes(e.toString().toLowerCase())},sorter:function(e,t){return e.nombre.length-t.nombre.length}}),{title:"RUT",dataIndex:"rut",key:"rut"},{title:"Acciones",key:"acciones",width:200,fixed:"right",render:function(e){return Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(N.a,{}),onClick:function(){H(!0),F(e),O(void 0),t.resetFields(),j(e.citas),t.setFieldsValue({rut:e.rut,nombre:e.nombre,direccion:e.direccion,telefono:e.telefono,email:e.email,sexo:e.sexo,nacionalidad:e.nacionalidad,alergia:e.alergia,previsionsalud:e.previsionsalud,otrosdatos:e.otrosdatos,fechanacimiento:we()(e.fechanacimiento,"YYYY-MM-DD")})}})}}];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(w.a,{type:"primary",shape:"circle",icon:Object(p.jsx)(G.a,{}),size:"large",onClick:function(){O(void 0),t.resetFields(),H(!0),F({_id:"",rut:"",nombre:"",direccion:"",telefono:"",alergia:"",citas:[],fechanacimiento:new Date,sexo:"",nacionalidad:"",email:"",previsionsalud:"",otrosdatos:""}),j([]),t.setFieldsValue({rut:"",nombre:"",direccion:"",telefono:"",alergia:"",citas:[],fechanacimiento:we()(new Date,"YYYY-MM-DD"),sexo:"",nacionalidad:"",email:"",previsionsalud:"",otrosdatos:""})}})})}),Object(p.jsx)(E.a,{orientation:"left",children:"Pacientes"}),Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(K.a,{tableLayout:"fixed",loading:d,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:o,columns:se})}),Object(p.jsx)(B.a,{title:"Paciente",width:720,height:650,onClose:function(){H(!1)},visible:q,bodyStyle:{paddingBottom:60},placement:"bottom",children:Object(p.jsxs)(R.a,{children:[Object(p.jsx)(U.a,{xs:2,sm:4,md:6,lg:8,xl:12,children:Object(p.jsxs)(g.a,{form:t,name:"formpaciente",labelCol:{span:3},wrapperCol:{span:16},size:"small",initialValues:{remember:!0},onFinish:oe,onFinishFailed:function(){},autoComplete:"off",children:[Object(p.jsx)(g.a.Item,{label:"Foto",name:"foto",children:Object(p.jsx)(_e.a,{listType:"picture",maxCount:1,showUploadList:!0,beforeUpload:function(e){O(e)},children:Object(p.jsx)(w.a,{icon:Object(p.jsx)(Pe.a,{}),children:"Subir (Max: 1)"})})}),_.img&&Object(p.jsx)(g.a.Item,{children:Object(p.jsx)(Fe.a,{width:200,src:qe(_.img)})}),Object(p.jsx)(g.a.Item,{label:"RUT",name:"rut",rules:[{required:!0,message:"Por favor ingrese el RUT"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Nombre",name:"nombre",rules:[{required:!0,message:"Por favor ingrese el Nombre"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Direcci\xf3n",name:"direccion",rules:[{required:!0,message:"Por favor ingrese la direcci\xf3n"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Tel\xe9fono",name:"telefono",rules:[{required:!0,message:"Por favor ingrese tel\xe9fono"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"E-mail",name:"email",rules:[{required:!0,message:"Por favor ingrese el correo electr\xf3nico"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"F. Nacimiento",name:"fechanacimiento",rules:[{required:!0,message:"Por favor ingrese fecha de nacimiento"}],children:Object(p.jsx)(ne.a,{})}),Object(p.jsx)(g.a.Item,{label:"Sexo",name:"sexo",rules:[{required:!0,message:"Por favor ingrese el sexo del paciente"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Nacionalidad",name:"nacionalidad",rules:[{required:!0,message:"Por favor ingrese nacionalidad del paciente"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Alergia",name:"alergia",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Provisi\xf3n S.",name:"previsionsalud",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Otros datos",name:"otrosdatos",children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(w.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(J.a,{}),children:"Guardar"})})]})}),Object(p.jsxs)(U.a,{xs:2,sm:4,md:6,lg:8,xl:10,children:[Object(p.jsx)(R.a,{gutter:12,children:Object(p.jsx)(U.a,{span:12,offset:12,children:Object(p.jsx)(w.a,{type:"primary",shape:"circle",disabled:0===_._id.length,icon:Object(p.jsx)(G.a,{}),size:"large",onClick:function(){C(void 0),r.resetFields(),re(""),$(!0),Y({_id:"",anamnesis:"",diagnostico:"",estatura:"",fechaproximaatencion:new Date,imc:"",medicamento:"",peso:"",presionalterial:"",pulso:"",temperatura:"",tratamiento:"",fecha:new Date,hemo:"",img:void 0}),r.setFieldsValue({estatura:"",peso:"",temperatura:"",presionalterial:"",imc:"",pulso:"",hemo:"",fecha:we()(new Date,"YYYY-MM-DD"),anamnesis:"",diagnostico:"",tratamiento:"",medicamento:"",fechaproximaatencion:we()(new Date,"YYYY-MM-DD")})}})})}),Object(p.jsx)(E.a,{orientation:"left",children:"Citas"}),Object(p.jsx)(R.a,{gutter:[16,24],children:Object(p.jsx)(K.a,{tableLayout:"fixed",loading:d,rowKey:"_id",pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","20","30"]},scroll:{x:1300},dataSource:b,columns:ie})})]})]})}),Object(p.jsx)(B.a,{title:"Cita",width:720,height:650,onClose:function(){$(!1)},visible:X,bodyStyle:{paddingBottom:60},placement:"bottom",children:Object(p.jsx)(g.a,{form:r,name:"formcita",labelCol:{span:8},wrapperCol:{span:16},size:"small",initialValues:{remember:!0},onFinish:ce,onFinishFailed:function(){},autoComplete:"off",children:Object(p.jsxs)(R.a,{children:[Object(p.jsxs)(U.a,{xs:2,sm:4,md:6,lg:8,xl:12,children:[Object(p.jsx)(g.a.Item,{label:"Peso",name:"peso",rules:[{required:!0,message:"Por favor ingrese peso"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Estatura",name:"estatura",rules:[{required:!0,message:"Por favor ingrese estatura"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Temperatura",name:"temperatura",rules:[{required:!0,message:"Por favor ingrese temperatura"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Presi\xf3n Alterial",name:"presionalterial",rules:[{required:!0,message:"Por favor ingrese presi\xf3n alterial"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"IMC",name:"imc",rules:[{required:!0,message:"Por favor ingrese IMC"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Pulso",name:"pulso",rules:[{required:!0,message:"Por favor ingrese pulso"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Hemo",name:"hemo",rules:[{required:!0,message:"Por favor ingrese pulso"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Fecha",name:"fecha",children:Object(p.jsx)(ne.a,{})}),Object(p.jsx)(g.a.Item,{label:"Anamnesis",name:"anamnesis",rules:[{required:!0,message:"Por favor ingrese anamnesis"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Diagn\xf3stico",name:"diagnostico",rules:[{required:!0,message:"Por favor ingrese diagn\xf3stico"}],children:Object(p.jsx)(v.a,{})})]}),Object(p.jsxs)(U.a,{xs:2,sm:4,md:6,lg:8,xl:10,children:[Object(p.jsx)(g.a.Item,{label:"Tratamiento",name:"tratamiento",rules:[{required:!0,message:"Por favor ingrese tratamiento"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Medicamento",name:"medicamento",rules:[{required:!0,message:"Por favor ingrese medicamento"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{label:"Pr\xf3xima atenci\xf3n",name:"fechaproximaatencion",children:Object(p.jsx)(ne.a,{})}),Object(p.jsx)(g.a.Item,{label:"Adjunto",name:"adjunto",children:Object(p.jsx)(_e.a,{listType:"text",maxCount:1,showUploadList:!0,beforeUpload:function(e){C(e)},children:Object(p.jsx)(w.a,{icon:Object(p.jsx)(Pe.a,{}),children:"Subir (Max: 1)"})})}),L.img&&Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(w.a,{type:"link",href:Te(L.img),children:"Dar click"})}),Object(p.jsx)(g.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(w.a,{type:"primary",htmlType:"submit",icon:Object(p.jsx)(J.a,{}),children:"Guardar cita"})})]})]})})})]})},Ee=a(37),Ke=a(181);Ee.e.register(Ee.d,Ee.i,Ee.b,Ee.n,Ee.o,Ee.g);var Be={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Chart.js Bar Chart"}}},Ne=["January","February","March","April","May","June","July"],Ge={labels:Ne,datasets:[{label:"Dataset 1",data:Ne.map((function(){return 800})),backgroundColor:"rgba(255, 99, 132, 0.5)"},{label:"Dataset 2",data:Ne.map((function(){return 700})),backgroundColor:"rgba(53, 162, 235, 0.5)"}]},Je=function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Ke.a,{options:Be,data:Ge})})},He=S.a.Header,We=S.a.Content,Qe=S.a.Footer,Xe=S.a.Sider,Ze=I.a.SubMenu,$e=function(){return Object(p.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024",children:Object(p.jsx)("path",{d:"M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"})})},et=function(e){return Object(p.jsx)(C.a,{component:$e,style:{color:"hotpink"}})},tt=function(){var e,t=function(e){switch(e){case"UserOutlined":return Object(p.jsx)(F.a,{});case"DollarOutlined":return Object(p.jsx)(P.a,{});case"BarcodeOutlined":return Object(p.jsx)(D.a,{});case"ShoppingCartOutlined":return Object(p.jsx)(L.a,{});case"MedicineBoxOutlined":return Object(p.jsx)(Y.a,{});case"HomeOutlined":return Object(p.jsx)(M.a,{});default:return Object(p.jsx)(z.a,{})}},a=Object(n.useContext)(f),r=a.logout,c=a.auth;Object(n.useEffect)((function(){console.log(c)}),[c]);var o=Object(n.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1];return Object(p.jsx)(_.a,{children:Object(p.jsxs)(S.a,{style:{minHeight:"100vh"},children:[Object(p.jsxs)(Xe,{collapsible:!0,collapsed:l,onCollapse:function(e){u(e)},children:[Object(p.jsx)("div",{className:"logo"}),Object(p.jsxs)(I.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[null===(e=c.opciones)||void 0===e?void 0:e.map((function(e){var a;return 1===e.clave.split("_").length&&Object(p.jsx)(Ze,{icon:t(e.ruta),title:e.titulo,children:null===(a=c.opciones)||void 0===a?void 0:a.filter((function(t){return t.clave.startsWith(e.clave+"_")})).map((function(e){var a;return 2===e.clave.split("_").length?e.ruta.includes("/")?Object(p.jsx)(I.a.Item,{children:Object(p.jsx)(_.b,{to:e.ruta,children:e.titulo})},e.clave):Object(p.jsx)(Ze,{icon:t(e.ruta),title:e.titulo,children:null===(a=c.opciones)||void 0===a?void 0:a.filter((function(t){return t.clave.startsWith(e.clave+"_")})).map((function(e){return Object(p.jsx)(I.a.Item,{children:Object(p.jsx)(_.b,{to:e.ruta,children:e.titulo})},e.clave)}))},e.clave):Object(p.jsx)("h1",{children:"ok"})}))},e.clave)})),Object(p.jsx)(Ze,{icon:Object(p.jsx)(q.a,{}),title:"Configurar",children:Object(p.jsx)(I.a.Item,{onClick:function(){r()},icon:Object(p.jsx)(et,{}),children:"Salir de la App "},"11")},"sub3")]})]}),Object(p.jsxs)(S.a,{className:"site-layout",children:[Object(p.jsx)(He,{className:"site-layout-background",style:{padding:0}}),Object(p.jsx)(We,{style:{margin:"16px 16px"},children:Object(p.jsxs)(x.d,{children:[Object(p.jsx)(x.b,{exact:!0,path:"/app/home",component:Je}),Object(p.jsx)(x.b,{exact:!0,path:"/app/categorias",component:$}),Object(p.jsx)(x.b,{exact:!0,path:"/app/productos",component:Le}),Object(p.jsx)(x.b,{exact:!0,path:"/app/clientes",component:Ye}),Object(p.jsx)(x.b,{exact:!0,path:"/app/movimientos",component:Se}),Object(p.jsx)(x.b,{exact:!0,path:"/app/pacientes",component:Ue}),Object(p.jsx)(x.a,{to:"/app/movimientos"})]})}),Object(p.jsx)(Qe,{style:{textAlign:"center"},children:"Software Manta \xa92018 Created by ManTalents"})]})]})})},at={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},nt={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},rt=function(){var e=g.a.useForm(),t=Object(i.a)(e,1)[0];return Object(p.jsxs)(g.a,Object(V.a)(Object(V.a)({},at),{},{form:t,name:"register",onFinish:function(e){console.log("Received values of form: ",e)},initialValues:{residence:["zhejiang","hangzhou","xihu"],prefix:"86"},scrollToFirstError:!0,children:[Object(p.jsx)(g.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(p.jsx)(v.a.Password,{})}),Object(p.jsx)(g.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}}],children:Object(p.jsx)(v.a.Password,{})}),Object(p.jsx)(g.a.Item,{name:"nickname",label:"Nickname",tooltip:"What do you want others to call you?",rules:[{required:!0,message:"Please input your nickname!",whitespace:!0}],children:Object(p.jsx)(v.a,{})}),Object(p.jsx)(g.a.Item,Object(V.a)(Object(V.a)({},nt),{},{children:Object(p.jsx)(w.a,{type:"primary",htmlType:"submit",children:"Register"})}))]}))},ct=a(101),ot=["component","isAuthenticated"],it=function(e){var t=e.component,a=e.isAuthenticated,n=Object(ct.a)(e,ot);return Object(p.jsx)(x.b,Object(V.a)(Object(V.a)({},n),{},{render:function(e){return a?Object(p.jsx)(x.a,{to:"/app"}):Object(p.jsx)(t,Object(V.a)({},e))}}))},st=["component","isAuthenticated"],lt=function(e){var t=e.component,a=e.isAuthenticated,n=Object(ct.a)(e,st);return Object(p.jsx)(x.b,Object(V.a)(Object(V.a)({},n),{},{render:function(e){return a?Object(p.jsx)(t,Object(V.a)({},e)):Object(p.jsx)(x.a,{to:"/auth"})}}))},ut=function(){var e=Object(n.useContext)(f),t=e.auth,a=e.verificaToken;return Object(n.useEffect)((function(){a()}),[a]),Object(p.jsx)(_.a,{children:Object(p.jsxs)(x.d,{children:[Object(p.jsx)(lt,{isAuthenticated:t.logged,path:"/app",component:tt}),Object(p.jsx)(it,{isAuthenticated:t.logged,exact:!0,path:"/auth/login",component:k}),Object(p.jsx)(it,{isAuthenticated:t.logged,exact:!0,path:"/auth/register",component:rt}),Object(p.jsx)(x.a,{to:"/auth/login"})]})})};o.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(O,{children:Object(p.jsx)(ut,{})})}),document.getElementById("root"))}},[[292,1,2]]]);
//# sourceMappingURL=main.a5711557.chunk.js.map